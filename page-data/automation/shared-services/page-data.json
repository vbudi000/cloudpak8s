{"componentChunkName":"component---src-pages-automation-shared-services-index-mdx","path":"/automation/shared-services/","result":{"pageContext":{"frontmatter":{"title":"Shared services","weight":300},"relativePagePath":"/automation/shared-services/index.mdx","titleType":"page","MdxNode":{"id":"b6ac31a8-4ab9-5a2e-8178-0e6f7c4063ee","children":[],"parent":"e89f9431-02d0-58ab-aecb-a9e8712f06c4","internal":{"content":"---\ntitle: Shared services\nweight: 300\n---\n\nMost components from the IBM Cloud Pak for Automation need access to a database server and a directory service.\nBACA and ECM specifically need access to a non-containerized DB2 database service.\n\nThe following sections provide instructions on how to install DB2 and the LDAP service provided by the IBM Security Directory Server.\n\n## Install DB2\n\n### Download the software archives\nDownload the following IBM DB2 v11.1 archives and fixpack in your working directory:\n- *IBM DB2 Advanced Workgroup Server Edition Restricted Use Activation V11.1 for Linux, UNIX and Windows Multilingual* (CNB21ML).\n- *IBM DB2 Advanced Workgroup Server Edition Server Restricted Use V11.1 for Linux on AMD64 and Intel EM64T systems (x64) Multilingual* (CNB8FML).\n- [IBM DB2 11.1.x Universal Fixpack](https://www.ibm.com/support/pages/download-db2-fix-packs-version-db2-linux-unix-and-windows)\n\n### Install the base DB2 version\n\n- Install unzip if not present:\n```\nyum install unzip\n```\n\n- Download the DB2 response file [`db2dba.rsp`](/assets/automation/shared/db2dba.rsp) and edit the file to provide your password in the `<you-password>` placeholders.\n\n- Expand the archive and start the install:\n```\ntar xzvf DB2_AWSE_REST_Svr_11.1_Lnx_86-64.tar.gz\nunzip DB2_AWSE_Restricted_Activation_11.1.zip\n./server_awse_o/db2setup -r db2dba.rsp\n```\nYou will see the following warnings, which you can ignore.\n```\nSummary of prerequisites that are not met on the current system: \nDBT3514W  The db2prereqcheck utility failed to find the following 32-bit library file: \"/lib/libpam.so*\". \nDBT3514W  The db2prereqcheck utility failed to find the following 32-bit library file: \"libstdc++.so.6\". \n```\n\n- Add the license\n```\n/opt/ibm/db2/V11.1/adm/db2licm -a awse_o/db2/license/db2awse_o.lic\n```\n\n### Install the fixpack\nFor more information, see for example [this page](https://www.ibm.com/support/knowledgecenter/en/SSBNJ7_1.4.3/db2/ttnpm_db2_FP1.html) of the IBM Knowledge Center.\n\n```\n## Expend the archive of the fixpack\ntar xvf v11.1.4fp4a_linuxx64_universal_fixpack.tar.gz\n## precheck before upgrade\ncd universal\n./db2prereqcheck -v 11.1.1.1 -i -s\n\n## list all db2 instances\n/opt/ibm/db2/V11.1/instance/db2ilist\ndb2inst1\n\n## Stop the instance db2inst1\nsu - db2inst1\ndb2 list application\ndb2 force applications all\ndb2 terminate\ndb2stop force\ndb2licd -end\nexit\n\nps -ef |grep db2fm\n/opt/ibm/db2/V11.1/bin/db2fmcu -d\n/opt/ibm/db2/V11.1/bin/db2fm -i db2inst1 -D\n\n/opt/ibm/db2/V11.1/instance/db2iset -i db2inst1 -all\nDB2_DEFERRED_PREPARE_SEMANTICS=YES\nDB2_COMPATIBILITY_VECTOR=ORA\nDB2COMM=TCPIP\nDB2AUTOSTART=YES\n\n/opt/ibm/db2/V11.1/instance/db2iauto -off db2inst1\n\nsu - db2inst1\nipclean\nexit\n\nsu - dasusr1\n/opt/ibm/db2/V11.1/das/bin/db2admin stop\nexit\n\n## Upgrade DB2\n## In case go to the fixpack universal directory\ncd /data/downloads/db2/fixpack11.1.1/universal\n./installFixPack -b /opt/ibm/db2/V11.1\n\n## Upgrade DB2 instance\n/opt/ibm/db2/V11.1/instance/db2iupdt db2inst1\n/opt/ibm/db2/V11.1/instance/db2iauto -on db2inst1\nsu - db2inst1\ndb2start\ndb2level\nexit\n\n#yum install libstdc++.so.6\n#yum install libstdc++.so.5\n#yum install compat-libstdc++-33\n```\n\n### Connection information\nUpon install completion, you can test the install using the following connection information:\n\n- URL: `<host>:50000`\n- User: `db2inst1`\n- Password: `<your-password>`\n\n\n## Install LDAP\n\n### Download the software archives\nDownload the following IBM Security Directory Server V6.4 archives and fixpack in your working directory:\n- *IBM Security Directory Server Premium Feature Activation Package v6.4 Multiplatform Multilingual eAssembly (CRV3IML)*\n- *IBM Security Directory Server V6.4 Client-Server ISO without entitlement for Linux x86-64 Multilingual (CN487ML)*\n\n### Mount the SDS ISO\n```\nmkdir /mnt/iso\nmount -t iso9660 -o loop /data/downloads/sds/sds64-linux-x86-64.iso /mnt/iso/\n```\n\n### Install SDS\n```\nyum install ksh\n\n## Setup ldap user and group\ngroupadd idsldap\nuseradd -g idsldap -d /home/idsldap -m -s /bin/ksh idsldap\npasswd idsldap\n## enter '<your-password>'\n\nusermod -a -G idsldap root\ngroups root\n\n## Skip db2 installation\nmkdir -p /opt/ibm/ldap/V6.4/install\ntouch /opt/ibm/ldap/V6.4/install/IBMLDAP_INSTALL_SKIPDB2REQ\n\n## Install gskit\ncd /mnt/iso/ibm_gskit\nrpm -Uhv gsk*linux.x86_64.rpm\n\n## Install sds rpms\ncd /mnt/iso/license\n./idsLicense\n## Enter 1 to accept the license agreement\n\ncd /mnt/iso/images\nrpm --force -ihv idsldap*rpm\n\ncd /data/downloads/sds\nunzip sds64-premium-feature-act-pkg.zip\ncd sdsV6.4/entitlement\nrpm --force -ihv idsldap-ent64-6.4.0-0.x86_64.rpm\n\n## Install ibm jdk\ncd /mnt/iso/ibm_jdk\ntar -xf 6.0.16.2-ISS-JAVA-LinuxX64-FP0002.tar -C /opt/ibm/ldap/V6.4/\n\n## Setup db2 path\nvi /opt/ibm/ldap/V6.4/etc/ldapdb.properties\ncurrentDB2InstallPath=/opt/ibm/db2/V11.1\ncurrentDB2Version=11.1.0.0\n\n## Create and configure instance\ncd /opt/ibm/ldap/V6.4/sbin\n./idsadduser -u dsinst1 -g grinst1 -w <your-password>\n## Enter 1 to continue\n\n## Create instance\n./idsicrt -I dsinst1 -p 389 -s 636 -e mysecretkey! -l /home/dsinst1 -G grinst1 -w <your-password>\n## Enter 1 to continue\n\n## Configure a database for a directory server instance.\n./idscfgdb -I dsinst1 -a dsinst1 -w <your-password> -t dsinst1 -l /home/dsinst1\n\n## Set the administration DN and administrative password for an instance\n./idsdnpw -I dsinst1 –u cn=root –p <your-password>\n\n## Add suffix\n./idscfgsuf -I dsinst1 -s o=IBM,c=US\n```\n\n### Operating the SDS Server\n```\n## Start the directory server\n./ibmslapd -I dsinst1\n\n## Stop the directory server\n./ibmslapd -I dsinst1 -k\n\n## Start or stop the administration server\n./ibmdiradm -I dsinst1\n\n## Stop the administration server\n./ibmdiradm -I dsinst1 -k\n\n## Verify the server\ncd /opt/ibm/ldap/V6.4/bin\n./ldapsearch -h ldap://169.47.178.137:389 -s base -b \" \" objectclass=* ibm-slapdisconfigurationmode\n```\n\n### Import LDAP users and groups\n\n- Install a tool such as [JXplorer](http://sourceforge.net/projects/jxplorer/files/jxplorer/version%203.3.1.2/jxplorer-3.3.1.2-windows-installer.exe/download) to browse your LDAP directory.\n- Import the [`cp4a.ldif`](/assets/automation/shared/cp4a.ldif) LDAP Data Interchange Format file using this tool.\n\n### Uninstall SDS\n```\n# Remove existing GSK\nrpm -qa | grep -i gsk\nrpm -e `rpm -qa | grep -i gsk`\n\n# Remove all the other rpm\nrpm -ev idsldap-srv64bit64-6.4.0-0.x86_64.rpm\nrpm -qa | grep -i idsldap\nrpm -ev `rpm -qa | grep -i idsldap`\n```\n\n### Connection information\nUpon install completion, you can test the install using the following connection information:\n\n- URL: `ldap://<host>:389`\n- User: `cn=root`\n- Password: `<your-password>`\n\n","type":"Mdx","contentDigest":"87ebaf9ab6cca2820f62302feaa98943","counter":499,"owner":"gatsby-plugin-mdx"},"frontmatter":{"title":"Shared services","weight":300},"exports":{},"rawBody":"---\ntitle: Shared services\nweight: 300\n---\n\nMost components from the IBM Cloud Pak for Automation need access to a database server and a directory service.\nBACA and ECM specifically need access to a non-containerized DB2 database service.\n\nThe following sections provide instructions on how to install DB2 and the LDAP service provided by the IBM Security Directory Server.\n\n## Install DB2\n\n### Download the software archives\nDownload the following IBM DB2 v11.1 archives and fixpack in your working directory:\n- *IBM DB2 Advanced Workgroup Server Edition Restricted Use Activation V11.1 for Linux, UNIX and Windows Multilingual* (CNB21ML).\n- *IBM DB2 Advanced Workgroup Server Edition Server Restricted Use V11.1 for Linux on AMD64 and Intel EM64T systems (x64) Multilingual* (CNB8FML).\n- [IBM DB2 11.1.x Universal Fixpack](https://www.ibm.com/support/pages/download-db2-fix-packs-version-db2-linux-unix-and-windows)\n\n### Install the base DB2 version\n\n- Install unzip if not present:\n```\nyum install unzip\n```\n\n- Download the DB2 response file [`db2dba.rsp`](/assets/automation/shared/db2dba.rsp) and edit the file to provide your password in the `<you-password>` placeholders.\n\n- Expand the archive and start the install:\n```\ntar xzvf DB2_AWSE_REST_Svr_11.1_Lnx_86-64.tar.gz\nunzip DB2_AWSE_Restricted_Activation_11.1.zip\n./server_awse_o/db2setup -r db2dba.rsp\n```\nYou will see the following warnings, which you can ignore.\n```\nSummary of prerequisites that are not met on the current system: \nDBT3514W  The db2prereqcheck utility failed to find the following 32-bit library file: \"/lib/libpam.so*\". \nDBT3514W  The db2prereqcheck utility failed to find the following 32-bit library file: \"libstdc++.so.6\". \n```\n\n- Add the license\n```\n/opt/ibm/db2/V11.1/adm/db2licm -a awse_o/db2/license/db2awse_o.lic\n```\n\n### Install the fixpack\nFor more information, see for example [this page](https://www.ibm.com/support/knowledgecenter/en/SSBNJ7_1.4.3/db2/ttnpm_db2_FP1.html) of the IBM Knowledge Center.\n\n```\n## Expend the archive of the fixpack\ntar xvf v11.1.4fp4a_linuxx64_universal_fixpack.tar.gz\n## precheck before upgrade\ncd universal\n./db2prereqcheck -v 11.1.1.1 -i -s\n\n## list all db2 instances\n/opt/ibm/db2/V11.1/instance/db2ilist\ndb2inst1\n\n## Stop the instance db2inst1\nsu - db2inst1\ndb2 list application\ndb2 force applications all\ndb2 terminate\ndb2stop force\ndb2licd -end\nexit\n\nps -ef |grep db2fm\n/opt/ibm/db2/V11.1/bin/db2fmcu -d\n/opt/ibm/db2/V11.1/bin/db2fm -i db2inst1 -D\n\n/opt/ibm/db2/V11.1/instance/db2iset -i db2inst1 -all\nDB2_DEFERRED_PREPARE_SEMANTICS=YES\nDB2_COMPATIBILITY_VECTOR=ORA\nDB2COMM=TCPIP\nDB2AUTOSTART=YES\n\n/opt/ibm/db2/V11.1/instance/db2iauto -off db2inst1\n\nsu - db2inst1\nipclean\nexit\n\nsu - dasusr1\n/opt/ibm/db2/V11.1/das/bin/db2admin stop\nexit\n\n## Upgrade DB2\n## In case go to the fixpack universal directory\ncd /data/downloads/db2/fixpack11.1.1/universal\n./installFixPack -b /opt/ibm/db2/V11.1\n\n## Upgrade DB2 instance\n/opt/ibm/db2/V11.1/instance/db2iupdt db2inst1\n/opt/ibm/db2/V11.1/instance/db2iauto -on db2inst1\nsu - db2inst1\ndb2start\ndb2level\nexit\n\n#yum install libstdc++.so.6\n#yum install libstdc++.so.5\n#yum install compat-libstdc++-33\n```\n\n### Connection information\nUpon install completion, you can test the install using the following connection information:\n\n- URL: `<host>:50000`\n- User: `db2inst1`\n- Password: `<your-password>`\n\n\n## Install LDAP\n\n### Download the software archives\nDownload the following IBM Security Directory Server V6.4 archives and fixpack in your working directory:\n- *IBM Security Directory Server Premium Feature Activation Package v6.4 Multiplatform Multilingual eAssembly (CRV3IML)*\n- *IBM Security Directory Server V6.4 Client-Server ISO without entitlement for Linux x86-64 Multilingual (CN487ML)*\n\n### Mount the SDS ISO\n```\nmkdir /mnt/iso\nmount -t iso9660 -o loop /data/downloads/sds/sds64-linux-x86-64.iso /mnt/iso/\n```\n\n### Install SDS\n```\nyum install ksh\n\n## Setup ldap user and group\ngroupadd idsldap\nuseradd -g idsldap -d /home/idsldap -m -s /bin/ksh idsldap\npasswd idsldap\n## enter '<your-password>'\n\nusermod -a -G idsldap root\ngroups root\n\n## Skip db2 installation\nmkdir -p /opt/ibm/ldap/V6.4/install\ntouch /opt/ibm/ldap/V6.4/install/IBMLDAP_INSTALL_SKIPDB2REQ\n\n## Install gskit\ncd /mnt/iso/ibm_gskit\nrpm -Uhv gsk*linux.x86_64.rpm\n\n## Install sds rpms\ncd /mnt/iso/license\n./idsLicense\n## Enter 1 to accept the license agreement\n\ncd /mnt/iso/images\nrpm --force -ihv idsldap*rpm\n\ncd /data/downloads/sds\nunzip sds64-premium-feature-act-pkg.zip\ncd sdsV6.4/entitlement\nrpm --force -ihv idsldap-ent64-6.4.0-0.x86_64.rpm\n\n## Install ibm jdk\ncd /mnt/iso/ibm_jdk\ntar -xf 6.0.16.2-ISS-JAVA-LinuxX64-FP0002.tar -C /opt/ibm/ldap/V6.4/\n\n## Setup db2 path\nvi /opt/ibm/ldap/V6.4/etc/ldapdb.properties\ncurrentDB2InstallPath=/opt/ibm/db2/V11.1\ncurrentDB2Version=11.1.0.0\n\n## Create and configure instance\ncd /opt/ibm/ldap/V6.4/sbin\n./idsadduser -u dsinst1 -g grinst1 -w <your-password>\n## Enter 1 to continue\n\n## Create instance\n./idsicrt -I dsinst1 -p 389 -s 636 -e mysecretkey! -l /home/dsinst1 -G grinst1 -w <your-password>\n## Enter 1 to continue\n\n## Configure a database for a directory server instance.\n./idscfgdb -I dsinst1 -a dsinst1 -w <your-password> -t dsinst1 -l /home/dsinst1\n\n## Set the administration DN and administrative password for an instance\n./idsdnpw -I dsinst1 –u cn=root –p <your-password>\n\n## Add suffix\n./idscfgsuf -I dsinst1 -s o=IBM,c=US\n```\n\n### Operating the SDS Server\n```\n## Start the directory server\n./ibmslapd -I dsinst1\n\n## Stop the directory server\n./ibmslapd -I dsinst1 -k\n\n## Start or stop the administration server\n./ibmdiradm -I dsinst1\n\n## Stop the administration server\n./ibmdiradm -I dsinst1 -k\n\n## Verify the server\ncd /opt/ibm/ldap/V6.4/bin\n./ldapsearch -h ldap://169.47.178.137:389 -s base -b \" \" objectclass=* ibm-slapdisconfigurationmode\n```\n\n### Import LDAP users and groups\n\n- Install a tool such as [JXplorer](http://sourceforge.net/projects/jxplorer/files/jxplorer/version%203.3.1.2/jxplorer-3.3.1.2-windows-installer.exe/download) to browse your LDAP directory.\n- Import the [`cp4a.ldif`](/assets/automation/shared/cp4a.ldif) LDAP Data Interchange Format file using this tool.\n\n### Uninstall SDS\n```\n# Remove existing GSK\nrpm -qa | grep -i gsk\nrpm -e `rpm -qa | grep -i gsk`\n\n# Remove all the other rpm\nrpm -ev idsldap-srv64bit64-6.4.0-0.x86_64.rpm\nrpm -qa | grep -i idsldap\nrpm -ev `rpm -qa | grep -i idsldap`\n```\n\n### Connection information\nUpon install completion, you can test the install using the following connection information:\n\n- URL: `ldap://<host>:389`\n- User: `cn=root`\n- Password: `<your-password>`\n\n","fileAbsolutePath":"/home/travis/build/ibm-cloud-architecture/cloudpak8s/src/pages/automation/shared-services/index.mdx"}}}}