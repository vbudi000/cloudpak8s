{"componentChunkName":"component---src-pages-integration-cp-4-i-deploy-eventstreams-2020-1-x-index-mdx","path":"/integration/cp4i-deploy-eventstreams-2020.1.x/","result":{"pageContext":{"frontmatter":{"title":"Event Streams","description":"Basic guide for deploying the Event Streams","keywords":"ibm, install, integration, Event Streams, Kafka"},"relativePagePath":"/integration/cp4i-deploy-eventstreams-2020.1.x/index.mdx","titleType":"page","MdxNode":{"id":"cbb5b652-b3fc-5975-b61e-8cb1b75c8044","children":[],"parent":"426dc8f5-a68b-53d9-9b23-640baf128d6e","internal":{"content":"---\ntitle: Event Streams\ndescription: Basic guide for deploying the Event Streams\nkeywords: 'ibm, install, integration, Event Streams, Kafka'\n---\n\n<InlineNotification>\n\nVersion 2020.2 is out for Cloud Pak for Ingegration.  This version is the first to feature Operators and has significant changes to the deployment and operations.  Please refer to the [Knowledge Center](https://www.ibm.com/support/knowledgecenter/en/SSGT7J_20.2/overview.html) while we update this playbook.  Thanks!\n\n</InlineNotification>\n\n<AnchorLinks>\n  <AnchorLink>Introduction</AnchorLink>\n  <AnchorLink>Prepare Installation</AnchorLink>\n  <AnchorLink>Begin Installation</AnchorLink>\n  <AnchorLink>Validate Installation</AnchorLink>\n</AnchorLinks>\n\n### **Introduction**\nThis page contains guidance on how to configure the Event Streams release\nfor both on-prem and IBM Cloud.\n\n### **Prepare Installation**\n\n1. **Change project to eventstreams**\n   ```\n   oc project eventstreams\n   ```\n2. **Resources Required:**\n\n    If you enable message indexing (which is enabled by default), then\n    you must have the vm.max_map_count property set to at least 262144 on\n    all IBM Cloud Private nodes in your cluster (not only the master node).\n    Please note this property may have already been updated by other\n    workloads to be higher than the minimum required. Run the following\n    commands on each node:\n\n    ```\n    sudo sysctl -w vm.max_map_count=262144\n\n    echo \"vm.max_map_count=262144\" | tee -a /etc/sysctl.conf\n    ```\n\nYou also may want to consider manually setting security if you run into\nissues related to permissions.  This applies to non-production/poc type\nenvironments where you need to get things up and running quickly.\nHere are the commands:\n\n```\noc adm policy add-scc-to-group anyuid system:serviceaccounts:eventstreams\noc adm policy add-scc-to-group ibm-anyuid-scc system:serviceaccounts:eventstreams\n```\nThis assumes you are installing to the eventstreams namespace/project.\nIf you are using a different location, adjust the last parameter to match\nyour environment.\n\n### **Begin Installation**\n\n<InlineNotification>\nIn creating the Helm chart for the Event Streams installation, you need to\nspecify a File System Group ID or you will see a permissions error for one of the \npods. You can configure a Group ID of 1000 or another value.\n</InlineNotification>\n\n1. Go to CP4I Platform Home. Click **Create instance** inside\nthe **Event Streams** tile.\n\n1. A window will pop up with a description of the requirements for\ninstalling. Click **Continue** to the helm chart deployment configuration.\n2. Click **Overview** to view the chart information and pre-reqs that\nwere covered in [Prepare Installation](#prepare-installation).\n3. Click **Configure**\n4. Enter the Helm release name. In our example, **es-1**\n5. Enter Target Namespace - **eventstreams**\n6. Select a Cluster - **local-cluster**.\n7. Check the license agreement.\n8. Under Parameter click **Quick Start** to expand.\n9. Here you will need to set the `Certificate Secret Name`.  Set this to a\nsimple value like `eventstreamssecret`.\n10. Image Pull Secret - Set to `ibm-entitlement-key` if using entitled\nregistry or if offline use the `deployer-dockercfg-XX` secret in your ace\nnamespace.  Use `oc get secrets` to get the exact value for your\nenvironment.\n11. Under `External Access Settings` find the `External hostname/IP address` and set that to the icp-proxy address defined during icp / common-services installation - icp-proxy.\\&lt;openshift-router-domain&gt;\n8. Under Parameters click **All Parameters** to expand.\n9. Under `Global install settings` ensure the `Generate Certificate for Security` checked.\n10. There are other settings you might consider adding, like persistent\nstorage.  It is not required for install but if you wish to add it, the\nchart will allow for it.  Event Streams requires file (not block) storage.\n10. If you do not wish to add persistent storage, you are done.  Scroll to\nthe bottom. Click **Install**.\n\n### **Validate Installation**\n1. View all pods in a running state and jobs completed\n   ![](/assets/img/integration/deploy-eventstreams/7.es-pods.png)\n","type":"Mdx","contentDigest":"4abf022efac34bae37388bb59f2d84d1","counter":469,"owner":"gatsby-plugin-mdx"},"frontmatter":{"title":"Event Streams","description":"Basic guide for deploying the Event Streams","keywords":"ibm, install, integration, Event Streams, Kafka"},"exports":{},"rawBody":"---\ntitle: Event Streams\ndescription: Basic guide for deploying the Event Streams\nkeywords: 'ibm, install, integration, Event Streams, Kafka'\n---\n\n<InlineNotification>\n\nVersion 2020.2 is out for Cloud Pak for Ingegration.  This version is the first to feature Operators and has significant changes to the deployment and operations.  Please refer to the [Knowledge Center](https://www.ibm.com/support/knowledgecenter/en/SSGT7J_20.2/overview.html) while we update this playbook.  Thanks!\n\n</InlineNotification>\n\n<AnchorLinks>\n  <AnchorLink>Introduction</AnchorLink>\n  <AnchorLink>Prepare Installation</AnchorLink>\n  <AnchorLink>Begin Installation</AnchorLink>\n  <AnchorLink>Validate Installation</AnchorLink>\n</AnchorLinks>\n\n### **Introduction**\nThis page contains guidance on how to configure the Event Streams release\nfor both on-prem and IBM Cloud.\n\n### **Prepare Installation**\n\n1. **Change project to eventstreams**\n   ```\n   oc project eventstreams\n   ```\n2. **Resources Required:**\n\n    If you enable message indexing (which is enabled by default), then\n    you must have the vm.max_map_count property set to at least 262144 on\n    all IBM Cloud Private nodes in your cluster (not only the master node).\n    Please note this property may have already been updated by other\n    workloads to be higher than the minimum required. Run the following\n    commands on each node:\n\n    ```\n    sudo sysctl -w vm.max_map_count=262144\n\n    echo \"vm.max_map_count=262144\" | tee -a /etc/sysctl.conf\n    ```\n\nYou also may want to consider manually setting security if you run into\nissues related to permissions.  This applies to non-production/poc type\nenvironments where you need to get things up and running quickly.\nHere are the commands:\n\n```\noc adm policy add-scc-to-group anyuid system:serviceaccounts:eventstreams\noc adm policy add-scc-to-group ibm-anyuid-scc system:serviceaccounts:eventstreams\n```\nThis assumes you are installing to the eventstreams namespace/project.\nIf you are using a different location, adjust the last parameter to match\nyour environment.\n\n### **Begin Installation**\n\n<InlineNotification>\nIn creating the Helm chart for the Event Streams installation, you need to\nspecify a File System Group ID or you will see a permissions error for one of the \npods. You can configure a Group ID of 1000 or another value.\n</InlineNotification>\n\n1. Go to CP4I Platform Home. Click **Create instance** inside\nthe **Event Streams** tile.\n\n1. A window will pop up with a description of the requirements for\ninstalling. Click **Continue** to the helm chart deployment configuration.\n2. Click **Overview** to view the chart information and pre-reqs that\nwere covered in [Prepare Installation](#prepare-installation).\n3. Click **Configure**\n4. Enter the Helm release name. In our example, **es-1**\n5. Enter Target Namespace - **eventstreams**\n6. Select a Cluster - **local-cluster**.\n7. Check the license agreement.\n8. Under Parameter click **Quick Start** to expand.\n9. Here you will need to set the `Certificate Secret Name`.  Set this to a\nsimple value like `eventstreamssecret`.\n10. Image Pull Secret - Set to `ibm-entitlement-key` if using entitled\nregistry or if offline use the `deployer-dockercfg-XX` secret in your ace\nnamespace.  Use `oc get secrets` to get the exact value for your\nenvironment.\n11. Under `External Access Settings` find the `External hostname/IP address` and set that to the icp-proxy address defined during icp / common-services installation - icp-proxy.\\&lt;openshift-router-domain&gt;\n8. Under Parameters click **All Parameters** to expand.\n9. Under `Global install settings` ensure the `Generate Certificate for Security` checked.\n10. There are other settings you might consider adding, like persistent\nstorage.  It is not required for install but if you wish to add it, the\nchart will allow for it.  Event Streams requires file (not block) storage.\n10. If you do not wish to add persistent storage, you are done.  Scroll to\nthe bottom. Click **Install**.\n\n### **Validate Installation**\n1. View all pods in a running state and jobs completed\n   ![](/assets/img/integration/deploy-eventstreams/7.es-pods.png)\n","fileAbsolutePath":"/home/travis/build/ibm-cloud-architecture/cloudpak8s/src/pages/integration/cp4i-deploy-eventstreams-2020.1.x/index.mdx"}}}}