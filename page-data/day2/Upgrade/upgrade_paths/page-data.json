{"componentChunkName":"component---src-pages-day-2-upgrade-upgrade-paths-index-mdx","path":"/day2/Upgrade/upgrade_paths/","result":{"pageContext":{"frontmatter":{"title":"OpenShift Platform Day2 - Upgrade - OCP 4 Upgrade Paths","description":"OpenShift Day2 Upgrade Paths","keywords":"OpenShift, day2, supplement, upgrade"},"relativePagePath":"/day2/Upgrade/upgrade_paths/index.mdx","titleType":"page","MdxNode":{"id":"163272bb-9175-5be5-9bb0-634d45639dc2","children":[],"parent":"789b825d-0b58-5726-889a-e121b9b37ae4","internal":{"content":"---\ntitle: OpenShift Platform Day2 - Upgrade - OCP 4 Upgrade Paths\ndescription: OpenShift Day2 Upgrade Paths\nkeywords: 'OpenShift, day2, supplement, upgrade'\n---\n\n\n## OpenShift Container Platform (OCP) 4 upgrade paths\n\nIn Red Hat Knowledgebase, there is an article which talk about the OCP upgrade paths.  \n[OpenShift Container Platform (OCP) 4 upgrade paths: 4583231](https://access.redhat.com/solutions/4583231)\n\n>Issue:  \n>What are the upgrade paths in OpenShift 4?  \n>How to upgrade to the next minor version of OpenShift 4?\n\nIn this document, we will demonstrate how you can find out the upgrade paths based on the knowledgebase information.\n\n## Preparation\n\nBefore we dive into deeper, we will talk about preparation you need to do.  \nTo follow the instructions in the knowledgebase, there are several tools we need to install on our environment.  \nFor this demonstration, we use macOS Catalina 10.15.4 on our laptop.  \nHere are the commands we needed to install on our macOS.\n\n- jq\n- dot\n- graph.sh\n\nWe also needed to install `brew` command to install `jq` and `dot` commands\n\nHere is the commands we executed to install `brew` command.\n\n```\n/bin/bash -c \"$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install.sh)\"\n```\n\nOnce we successfully installed the brew command (a.k.a. Homebrew), then we installed the `jq` command.\n\n```\nbrew install jq\n```\n\nThen, we installed `dot` command.  Note that the graphviz includes the `dot` command.\n\n```\nbrew install graphviz\n```\n\nOne more thing we needed to installed is that the `graph.sh`.\n\n>First, download the available graph.sh file: <https://github.com/openshift/cincinnati/blob/master/hack/graph.sh>\n\nNow, we got everything we need to follow the instructions in the knowledgebase.\n\n## Listing the available upgrade paths\n\nIn the knowledgebase, there are two ways to find out the upgrade paths introduced.  \n\n## Listing upgrade paths with a text\n\nThe upgrade path from a current version to the next available version can be found by using curl command.\n\nWe will export the CURRENT_VERSION and CHANNEL_NAME variables before we execute the curl command as follow.\n\n```\nkenueno@kenuenoMacBook-Pro OCP4_upgrade_paths % export CURRENT_VERSION=4.3.12\nkenueno@kenuenoMacBook-Pro OCP4_upgrade_paths % export CHANNEL_NAME=stable-4.4\n```\n\nI the above example, we specified \"4.3.12\" as our current OCP cluster version.  \nThen, we specified \"stable-4.4\" channel for the target version.  \n\nNow, we are ready to run the curl command as follow.  \n\n```\nkenueno@kenuenoMacBook-Pro OCP4_upgrade_paths % curl -sH 'Accept:application/json' \"https://api.openshift.com/api/upgrades_info/v1/graph?channel=${CHANNEL_NAME}\" | jq -r --arg CURRENT_VERSION \"${CURRENT_VERSION}\" '. as $graph | $graph.nodes | map(.version=='\\\"$CURRENT_VERSION\\\"') | index(true) as $orig | $graph.edges | map(select(.[0] == $orig)[1]) | map($graph.nodes[.].version) | sort_by(.)'\n[\n  \"4.3.13\",\n  \"4.3.18\",\n  \"4.3.19\",\n  \"4.3.21\"\n]\nkenueno@kenuenoMacBook-Pro OCP4_upgrade_paths %\n```\n\nIn our case, the upgrade paths from \"4.3.12\" to \"4.4\" are \"4.3.13\", \"4.3.18\", \"4.3.19\" and \"4.3.21\" as shown above.\n\nNote that we used the `jq` command since it can easily extract values from JSON, aggregate them, and display them after formatting.  \n\n## Listing upgrade paths with a dot graph\n\nThere is a way to show the upgrade paths with a `dot` grap.  \nA `dot` graph can be generated which may make it easier to understand the available upgrade paths.  \n\nWe also use the curl command and it will pipe the output to the `graph.sh` script, then pipe to the `dot` command to generate a graph as follow.\n\n```\nkenueno@kenuenoMacBook-Pro OCP4_upgrade_paths % curl -sH 'Accept:application/json' 'https://api.openshift.com/api/upgrades_info/v1/graph?channel=fast-4.4&arch=amd64' | ./graph.sh | dot -Tsvg > graph.svg\nkenueno@kenuenoMacBook-Pro OCP4_upgrade_paths % \n```\n\nOnce the commands generated the graph, in our example above, it is called **graph.svg**, we can take a look at the graph via a Web browser such as Safari, Chrome and Firefox as follow.  \n\n![ocp44_upgrade_path](./images/ocp44_upgrade_path.png) \n\nThe above output is for the stable-4.4 channel as of 2020-05-27.  \nNote that this output will most likely change at later dates, and is shown for demonstration purposes only.","type":"Mdx","contentDigest":"c21f404435686354b2d708aeeeffd3a0","counter":504,"owner":"gatsby-plugin-mdx"},"frontmatter":{"title":"OpenShift Platform Day2 - Upgrade - OCP 4 Upgrade Paths","description":"OpenShift Day2 Upgrade Paths","keywords":"OpenShift, day2, supplement, upgrade"},"exports":{},"rawBody":"---\ntitle: OpenShift Platform Day2 - Upgrade - OCP 4 Upgrade Paths\ndescription: OpenShift Day2 Upgrade Paths\nkeywords: 'OpenShift, day2, supplement, upgrade'\n---\n\n\n## OpenShift Container Platform (OCP) 4 upgrade paths\n\nIn Red Hat Knowledgebase, there is an article which talk about the OCP upgrade paths.  \n[OpenShift Container Platform (OCP) 4 upgrade paths: 4583231](https://access.redhat.com/solutions/4583231)\n\n>Issue:  \n>What are the upgrade paths in OpenShift 4?  \n>How to upgrade to the next minor version of OpenShift 4?\n\nIn this document, we will demonstrate how you can find out the upgrade paths based on the knowledgebase information.\n\n## Preparation\n\nBefore we dive into deeper, we will talk about preparation you need to do.  \nTo follow the instructions in the knowledgebase, there are several tools we need to install on our environment.  \nFor this demonstration, we use macOS Catalina 10.15.4 on our laptop.  \nHere are the commands we needed to install on our macOS.\n\n- jq\n- dot\n- graph.sh\n\nWe also needed to install `brew` command to install `jq` and `dot` commands\n\nHere is the commands we executed to install `brew` command.\n\n```\n/bin/bash -c \"$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install.sh)\"\n```\n\nOnce we successfully installed the brew command (a.k.a. Homebrew), then we installed the `jq` command.\n\n```\nbrew install jq\n```\n\nThen, we installed `dot` command.  Note that the graphviz includes the `dot` command.\n\n```\nbrew install graphviz\n```\n\nOne more thing we needed to installed is that the `graph.sh`.\n\n>First, download the available graph.sh file: <https://github.com/openshift/cincinnati/blob/master/hack/graph.sh>\n\nNow, we got everything we need to follow the instructions in the knowledgebase.\n\n## Listing the available upgrade paths\n\nIn the knowledgebase, there are two ways to find out the upgrade paths introduced.  \n\n## Listing upgrade paths with a text\n\nThe upgrade path from a current version to the next available version can be found by using curl command.\n\nWe will export the CURRENT_VERSION and CHANNEL_NAME variables before we execute the curl command as follow.\n\n```\nkenueno@kenuenoMacBook-Pro OCP4_upgrade_paths % export CURRENT_VERSION=4.3.12\nkenueno@kenuenoMacBook-Pro OCP4_upgrade_paths % export CHANNEL_NAME=stable-4.4\n```\n\nI the above example, we specified \"4.3.12\" as our current OCP cluster version.  \nThen, we specified \"stable-4.4\" channel for the target version.  \n\nNow, we are ready to run the curl command as follow.  \n\n```\nkenueno@kenuenoMacBook-Pro OCP4_upgrade_paths % curl -sH 'Accept:application/json' \"https://api.openshift.com/api/upgrades_info/v1/graph?channel=${CHANNEL_NAME}\" | jq -r --arg CURRENT_VERSION \"${CURRENT_VERSION}\" '. as $graph | $graph.nodes | map(.version=='\\\"$CURRENT_VERSION\\\"') | index(true) as $orig | $graph.edges | map(select(.[0] == $orig)[1]) | map($graph.nodes[.].version) | sort_by(.)'\n[\n  \"4.3.13\",\n  \"4.3.18\",\n  \"4.3.19\",\n  \"4.3.21\"\n]\nkenueno@kenuenoMacBook-Pro OCP4_upgrade_paths %\n```\n\nIn our case, the upgrade paths from \"4.3.12\" to \"4.4\" are \"4.3.13\", \"4.3.18\", \"4.3.19\" and \"4.3.21\" as shown above.\n\nNote that we used the `jq` command since it can easily extract values from JSON, aggregate them, and display them after formatting.  \n\n## Listing upgrade paths with a dot graph\n\nThere is a way to show the upgrade paths with a `dot` grap.  \nA `dot` graph can be generated which may make it easier to understand the available upgrade paths.  \n\nWe also use the curl command and it will pipe the output to the `graph.sh` script, then pipe to the `dot` command to generate a graph as follow.\n\n```\nkenueno@kenuenoMacBook-Pro OCP4_upgrade_paths % curl -sH 'Accept:application/json' 'https://api.openshift.com/api/upgrades_info/v1/graph?channel=fast-4.4&arch=amd64' | ./graph.sh | dot -Tsvg > graph.svg\nkenueno@kenuenoMacBook-Pro OCP4_upgrade_paths % \n```\n\nOnce the commands generated the graph, in our example above, it is called **graph.svg**, we can take a look at the graph via a Web browser such as Safari, Chrome and Firefox as follow.  \n\n![ocp44_upgrade_path](./images/ocp44_upgrade_path.png) \n\nThe above output is for the stable-4.4 channel as of 2020-05-27.  \nNote that this output will most likely change at later dates, and is shown for demonstration purposes only.","fileAbsolutePath":"/home/travis/build/ibm-cloud-architecture/cloudpak8s/src/pages/day2/Upgrade/upgrade_paths/index.mdx"}}}}