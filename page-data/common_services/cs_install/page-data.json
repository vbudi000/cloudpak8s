{"componentChunkName":"component---src-pages-common-services-cs-install-index-mdx","path":"/common_services/cs_install/","result":{"pageContext":{"frontmatter":{"title":"Common Services - Installation Guide","description":"Installation guide for installing Cloud Pak common services","keywords":"ibm,install,cs,cloudpak,commonservices"},"relativePagePath":"/common_services/cs_install/index.mdx","titleType":"page","MdxNode":{"id":"013d81c3-c4a3-577f-9eca-4a78606d813a","children":[],"parent":"4c3dc020-3665-52bb-9f75-6a14d0bb5854","internal":{"content":"---\ntitle: Common Services - Installation Guide\ndescription: Installation guide for installing Cloud Pak common services\nkeywords: 'ibm,install,cs,cloudpak,commonservices'\n---\n\n<PageDescription>\n\nIn this section we will walk through the **Online** installation of \nIBM Common Services, used to support IBM Cloud Paks. This \ndocument is specifically written for installations on Red Hat \nOpenShift 4.x running on an x86 architecture. \n\n</PageDescription>\n\n<AnchorLinks>\n  <AnchorLink>Adding Operator Source to OpenShift Catalog</AnchorLink>\n  <AnchorLink>Customizing the installation</AnchorLink>\n  <AnchorLink>Login to common services</AnchorLink>\n  <AnchorLink>Uninstall</AnchorLink>\n</AnchorLinks>\n\n## Prerequisites\n\nThis document does not describe how to install or configure the \nunderlying OpenShift platform. Prior to installing, make sure you have \na working OpenShift cluster with the required capacity.\n\n- Check the requirements documentation in the \n[IBM Knowledge Center](https://www.ibm.com/support/knowledgecenter/SSHKN6/installer/3.x.x/preparation.html) \nto make sure you have sized your cluster \nappropriately and have sufficient capacity.\n\n## Adding CatalogSource to OpenShift Catalog\n\n1. Login to your OpenShift cluster console.\n\n2. Apply the YAML below by clicking on the **+** icon in the upper-right \ncorner.\n\n   ```yaml\n   apiVersion: operators.coreos.com/v1alpha1\n   kind: CatalogSource\n   metadata:\n     name: opencloud-operators\n     namespace: openshift-marketplace\n   spec:\n     displayName: IBMCS Operators\n     publisher: IBM\n     sourceType: grpc\n     image: docker.io/ibmcom/ibm-common-service-catalog:latest\n   updateStrategy:\n     registryPoll:\n       interval: 45m\n   ```\n\n3. Copy the YAML, paste it into the editor and click **Create**. \n\n    ![](s_86E1C612A8E4034D60635859136C69E365CCD6AF40EB763B06F97C01BB20953F_1594228030050_image.png)\n\n4. Next create a new project for the `common-services` operator.\n\n    ```\n    oc new-project common-services\n    ```\n\n5. From the navigation pane, click **Operators** > **OperatorHub**. \nThe **OperatorHub** page is displayed.\n\n6. In the **All Items** field, enter `IBM Common Service Operator`. \nThe **IBM Common Service Operator** is displayed.\n\n7. Click the **IBM Common Service Operator** tile. \nThe **IBM Common Service Operator** window is displayed.\n\n   ![](s_86E1C612A8E4034D60635859136C69E365CCD6AF40EB763B06F97C01BB20953F_1594228775679_image.png)\n\n8. Click **Install**. You see the **Create Operator Subscription** page.\n\n9. Set **Installation Mode** to the specific namespace that you created \nfor the `IBM Common Service Operator`. For example, `common-service`.\n\n10. Set **Update Channel** to the `stable-v1` version.\n\n11. Set **Approval Strategy** to `Automatic`.\n\n12. Click **Subscribe**. \n\n    ![](s_86E1C612A8E4034D60635859136C69E365CCD6AF40EB763B06F97C01BB20953F_1594228836685_image.png)\n\n13. After a few minutes, the **IBM Common Service Operator** and the \n**Operand Deployment Lifecycle Manager Operator** are installed, \nand you can see these operators on the **Installed Operators** page.\n\n   ![](s_86E1C612A8E4034D60635859136C69E365CCD6AF40EB763B06F97C01BB20953F_1594228923197_image.png)\n\n## Customizing the installation\nHere we walk through an example of how you can customize the installation configuration. This is just an example. A complete list of \ncustomizations can be found at this \n[IBM Knowledge Center](https://www.ibm.com/support/knowledgecenter/SSHKN6/installer/1.x.x/config_operand.html)\nlink.\n\nIn this section we customize the installation by modifying the \n`OperandConfig` to add the ROKS installation config. We also remove the \n`elasticsearch` component from the `OperandRequest` to prevent it from \nbeing installed. \n\n1. From the **Project** drop-down list, select the **ibm-common-services** \nnamespace. You see the **Operand Deployment Lifecycle Manager** Operator.\n\n2. Click the **OperandConfig** and then select the existing \n`common-services` OperandConfig.\nSelect the **YAML** Tab.\n\n3. Add the following parameters to the \n`ibm-iam-operator.spec.authentication.config` section.\n\n   ```\n     authentication:\n     replicas: 3\n     config:\n       roksEnabled: true\n       roksURL: 'https://c100-e.containers.test.cloud.ibm.com:31099'\n       roksUserPrefix: 'IAM#'\n   ```\n\n   ![cs-roks-cfg](cs-config-roks.png)\n\n4. Click **Save**.\n\n5. Select the **OperandRequest** tab and click **Create Operand Request**. Paste the following content in the YAML editor (overwrite the existing content):\n\n```yaml\napiVersion: operator.ibm.com/v1alpha1\nkind: OperandRequest\nmetadata:\n  name: common-service\n  namespace: ibm-common-services\nspec:\n  requests:\n    - operands:\n        - name: ibm-cert-manager-operator\n        - name: ibm-mongodb-operator\n        - name: ibm-iam-operator\n        - name: ibm-monitoring-exporters-operator\n        - name: ibm-monitoring-prometheusext-operator\n        - name: ibm-monitoring-grafana-operator\n        - name: ibm-healthcheck-operator\n        - name: ibm-management-ingress-operator\n        - name: ibm-licensing-operator\n        - name: ibm-metering-operator\n        - name: ibm-commonui-operator\n        - name: ibm-elastic-stack-operator\n        - name: ibm-ingress-nginx-operator\n        - name: ibm-auditlogging-operator\n        - name: ibm-platform-api-operator\n        - name: ibm-helm-api-operator\n        - name: ibm-helm-repo-operator\n        - name: ibm-catalog-ui-operator\n      registry: common-service\n```\n\n    ![](s_86E1C612A8E4034D60635859136C69E365CCD6AF40EB763B06F97C01BB20953F_1594230335199_image.png)\n\n6. Click **Create** to start the installaton.\n\nNote: If you see pods in the `ibm-common-services` namespaces stuck in `CreateContainerConfigError` status and are running OpenShift Container Platfrom 4.4.x check the workaround here:\nhttps://www.ibm.com/support/knowledgecenter/SSHKN6/installer/3.x.x/troubleshoot/op_pending.html\n\n## Login to common services\n\n\n1. To verify the installation, check whether all the pods in the \n`ibm-common-services` namespace are running. Use the following \ncommand:\n\n   ```\n   oc get pods -n ibm-common-services\n   ```\n\n   You can also use the following command to verify whether the common services are successfully installed:\n\n   ```\n   oc -n ibm-common-services get csv\n   ```\n\n2. Use the following command to get the URL to access the console:\n    \n   ```\n   oc get route -n ibm-common-services cp-console -o jsonpath=‘{.spec.host}’\n   ```\n\n3. You can get the password for the `admin` username by running the \nfollowing command:\n\n   ```\n   oc -n ibm-common-services get secret platform-auth-idp-credentials -o jsonpath='{.data.admin_password}' | base64 -d\n   ```\n   \n4. Open the route in a web browser and login using `admin` and the password from the previous step.\n\n    ![](s_86E1C612A8E4034D60635859136C69E365CCD6AF40EB763B06F97C01BB20953F_1594232899596_image.png)\n\n## Uninstall\n\nTo uninstall the Common Services, follow the instructions for **Uninstalling all services** [here](https://www.ibm.com/support/knowledgecenter/SSHKN6/installer/3.x.x/uninstallation.html).  Skip the step for deleting the CRDs (will be covered later).\n\nTo complete the process simply run this script:  \n\n```bash <(curl -s https://raw.githubusercontent.com/IBM/ibm-common-service-operator/master/common/scripts/force-uninstall.sh)```\n\n## Additional Resources\n* <a href=\"https://www.ibm.com/support/knowledgecenter/SSHKN6/kc_welcome_cs.html\">Knowledge Center - IBM Cloud Platform Common Services documentation</a>\n","type":"Mdx","contentDigest":"816c524b221bee0fd274dc48ca06d6aa","counter":500,"owner":"gatsby-plugin-mdx"},"frontmatter":{"title":"Common Services - Installation Guide","description":"Installation guide for installing Cloud Pak common services","keywords":"ibm,install,cs,cloudpak,commonservices"},"exports":{},"rawBody":"---\ntitle: Common Services - Installation Guide\ndescription: Installation guide for installing Cloud Pak common services\nkeywords: 'ibm,install,cs,cloudpak,commonservices'\n---\n\n<PageDescription>\n\nIn this section we will walk through the **Online** installation of \nIBM Common Services, used to support IBM Cloud Paks. This \ndocument is specifically written for installations on Red Hat \nOpenShift 4.x running on an x86 architecture. \n\n</PageDescription>\n\n<AnchorLinks>\n  <AnchorLink>Adding Operator Source to OpenShift Catalog</AnchorLink>\n  <AnchorLink>Customizing the installation</AnchorLink>\n  <AnchorLink>Login to common services</AnchorLink>\n  <AnchorLink>Uninstall</AnchorLink>\n</AnchorLinks>\n\n## Prerequisites\n\nThis document does not describe how to install or configure the \nunderlying OpenShift platform. Prior to installing, make sure you have \na working OpenShift cluster with the required capacity.\n\n- Check the requirements documentation in the \n[IBM Knowledge Center](https://www.ibm.com/support/knowledgecenter/SSHKN6/installer/3.x.x/preparation.html) \nto make sure you have sized your cluster \nappropriately and have sufficient capacity.\n\n## Adding CatalogSource to OpenShift Catalog\n\n1. Login to your OpenShift cluster console.\n\n2. Apply the YAML below by clicking on the **+** icon in the upper-right \ncorner.\n\n   ```yaml\n   apiVersion: operators.coreos.com/v1alpha1\n   kind: CatalogSource\n   metadata:\n     name: opencloud-operators\n     namespace: openshift-marketplace\n   spec:\n     displayName: IBMCS Operators\n     publisher: IBM\n     sourceType: grpc\n     image: docker.io/ibmcom/ibm-common-service-catalog:latest\n   updateStrategy:\n     registryPoll:\n       interval: 45m\n   ```\n\n3. Copy the YAML, paste it into the editor and click **Create**. \n\n    ![](s_86E1C612A8E4034D60635859136C69E365CCD6AF40EB763B06F97C01BB20953F_1594228030050_image.png)\n\n4. Next create a new project for the `common-services` operator.\n\n    ```\n    oc new-project common-services\n    ```\n\n5. From the navigation pane, click **Operators** > **OperatorHub**. \nThe **OperatorHub** page is displayed.\n\n6. In the **All Items** field, enter `IBM Common Service Operator`. \nThe **IBM Common Service Operator** is displayed.\n\n7. Click the **IBM Common Service Operator** tile. \nThe **IBM Common Service Operator** window is displayed.\n\n   ![](s_86E1C612A8E4034D60635859136C69E365CCD6AF40EB763B06F97C01BB20953F_1594228775679_image.png)\n\n8. Click **Install**. You see the **Create Operator Subscription** page.\n\n9. Set **Installation Mode** to the specific namespace that you created \nfor the `IBM Common Service Operator`. For example, `common-service`.\n\n10. Set **Update Channel** to the `stable-v1` version.\n\n11. Set **Approval Strategy** to `Automatic`.\n\n12. Click **Subscribe**. \n\n    ![](s_86E1C612A8E4034D60635859136C69E365CCD6AF40EB763B06F97C01BB20953F_1594228836685_image.png)\n\n13. After a few minutes, the **IBM Common Service Operator** and the \n**Operand Deployment Lifecycle Manager Operator** are installed, \nand you can see these operators on the **Installed Operators** page.\n\n   ![](s_86E1C612A8E4034D60635859136C69E365CCD6AF40EB763B06F97C01BB20953F_1594228923197_image.png)\n\n## Customizing the installation\nHere we walk through an example of how you can customize the installation configuration. This is just an example. A complete list of \ncustomizations can be found at this \n[IBM Knowledge Center](https://www.ibm.com/support/knowledgecenter/SSHKN6/installer/1.x.x/config_operand.html)\nlink.\n\nIn this section we customize the installation by modifying the \n`OperandConfig` to add the ROKS installation config. We also remove the \n`elasticsearch` component from the `OperandRequest` to prevent it from \nbeing installed. \n\n1. From the **Project** drop-down list, select the **ibm-common-services** \nnamespace. You see the **Operand Deployment Lifecycle Manager** Operator.\n\n2. Click the **OperandConfig** and then select the existing \n`common-services` OperandConfig.\nSelect the **YAML** Tab.\n\n3. Add the following parameters to the \n`ibm-iam-operator.spec.authentication.config` section.\n\n   ```\n     authentication:\n     replicas: 3\n     config:\n       roksEnabled: true\n       roksURL: 'https://c100-e.containers.test.cloud.ibm.com:31099'\n       roksUserPrefix: 'IAM#'\n   ```\n\n   ![cs-roks-cfg](cs-config-roks.png)\n\n4. Click **Save**.\n\n5. Select the **OperandRequest** tab and click **Create Operand Request**. Paste the following content in the YAML editor (overwrite the existing content):\n\n```yaml\napiVersion: operator.ibm.com/v1alpha1\nkind: OperandRequest\nmetadata:\n  name: common-service\n  namespace: ibm-common-services\nspec:\n  requests:\n    - operands:\n        - name: ibm-cert-manager-operator\n        - name: ibm-mongodb-operator\n        - name: ibm-iam-operator\n        - name: ibm-monitoring-exporters-operator\n        - name: ibm-monitoring-prometheusext-operator\n        - name: ibm-monitoring-grafana-operator\n        - name: ibm-healthcheck-operator\n        - name: ibm-management-ingress-operator\n        - name: ibm-licensing-operator\n        - name: ibm-metering-operator\n        - name: ibm-commonui-operator\n        - name: ibm-elastic-stack-operator\n        - name: ibm-ingress-nginx-operator\n        - name: ibm-auditlogging-operator\n        - name: ibm-platform-api-operator\n        - name: ibm-helm-api-operator\n        - name: ibm-helm-repo-operator\n        - name: ibm-catalog-ui-operator\n      registry: common-service\n```\n\n    ![](s_86E1C612A8E4034D60635859136C69E365CCD6AF40EB763B06F97C01BB20953F_1594230335199_image.png)\n\n6. Click **Create** to start the installaton.\n\nNote: If you see pods in the `ibm-common-services` namespaces stuck in `CreateContainerConfigError` status and are running OpenShift Container Platfrom 4.4.x check the workaround here:\nhttps://www.ibm.com/support/knowledgecenter/SSHKN6/installer/3.x.x/troubleshoot/op_pending.html\n\n## Login to common services\n\n\n1. To verify the installation, check whether all the pods in the \n`ibm-common-services` namespace are running. Use the following \ncommand:\n\n   ```\n   oc get pods -n ibm-common-services\n   ```\n\n   You can also use the following command to verify whether the common services are successfully installed:\n\n   ```\n   oc -n ibm-common-services get csv\n   ```\n\n2. Use the following command to get the URL to access the console:\n    \n   ```\n   oc get route -n ibm-common-services cp-console -o jsonpath=‘{.spec.host}’\n   ```\n\n3. You can get the password for the `admin` username by running the \nfollowing command:\n\n   ```\n   oc -n ibm-common-services get secret platform-auth-idp-credentials -o jsonpath='{.data.admin_password}' | base64 -d\n   ```\n   \n4. Open the route in a web browser and login using `admin` and the password from the previous step.\n\n    ![](s_86E1C612A8E4034D60635859136C69E365CCD6AF40EB763B06F97C01BB20953F_1594232899596_image.png)\n\n## Uninstall\n\nTo uninstall the Common Services, follow the instructions for **Uninstalling all services** [here](https://www.ibm.com/support/knowledgecenter/SSHKN6/installer/3.x.x/uninstallation.html).  Skip the step for deleting the CRDs (will be covered later).\n\nTo complete the process simply run this script:  \n\n```bash <(curl -s https://raw.githubusercontent.com/IBM/ibm-common-service-operator/master/common/scripts/force-uninstall.sh)```\n\n## Additional Resources\n* <a href=\"https://www.ibm.com/support/knowledgecenter/SSHKN6/kc_welcome_cs.html\">Knowledge Center - IBM Cloud Platform Common Services documentation</a>\n","fileAbsolutePath":"/home/travis/build/ibm-cloud-architecture/cloudpak8s/src/pages/common_services/cs_install/index.mdx"}}}}