{"componentChunkName":"component---src-pages-mcm-cp-4-mcm-cam-install-index-mdx","path":"/mcm/cp4mcm_cam_install/","result":{"pageContext":{"frontmatter":{"title":"CAM - Installation Guide","weight":500},"relativePagePath":"/mcm/cp4mcm_cam_install/index.mdx","titleType":"page","MdxNode":{"id":"305641c2-dde7-5d3d-8b33-289ac72a443b","children":[],"parent":"163daa68-6476-572f-9c1c-663359ae01e2","internal":{"content":"---\ntitle: \"CAM - Installation Guide\"\nweight: 500\n---\n\n## Overview\n\n### Prerequisites\n* **OCP 4.0+**\n* **Install CLI Tools**\n  - Helm CLI\n  - Kubernetes CLI\n  - IBM Cloud Pak CLI\n  \n  For CLI install help, check out the Knowledge Center guides <a href=\"https://www.ibm.com/support/knowledgecenter/en/SSFC4F_1.2.0/cli/cli_guide_mcm.html\">here</a>.\n\n\n* [Install MCM](/content/mcm/cp4mcm_mcm_install/)\n* **Install Service Catalog** (Required for OCP 4.0+. See install <a href=\"https://docs.openshift.com/container-platform/4.2/applications/service_brokers/installing-service-catalog.html\">here</a>)\n\n## Online Installation\n\n## Offline Installation\n\n1. Download the installer file from Passport Advantage (PPA):\n\n|         File Name         | Part Number | Version |\n| :-----------------------: | :------ |  :------ |\n| icp-cam-x86_64-4.1.tar.gz | CC4E1EN |  1.2 |\n| IBM_CLOUD_AUTO_MGR_4.2_Lnx.tar.gz | CC5QFEN | 1.3 |\n\n2. Create SCC policy\n\n  ```\n  oc adm policy add-scc-to-user ibm-anyuid-hostpath-scc system:serviceaccount:services:default\n  ```\n\n  *Note*: Persistent volumes with RWX mode is needed for Cloud Automation Manager. Visit <a href=\"https://www.ibm.com/support/knowledgecenter/SS2L37_4.1.0.0/cam_create_pv.html\">here</a> for more information.\n\n3. Generate a deployment ServiceID API Key in the `services` namespace using the following commands:\n\n  ```\n  export serviceIDName='service-deploy'\n  export serviceApiKeyName='service-deploy-api-key'\n  cloudctl login -a <ibm_cloud_pak_mcm_console_url> --skip-ssl-validation -u admin -p <ibm_cloud_pak_mcm_admin_password> -n services\n  cloudctl iam service-id-create ${serviceIDName} -d 'Service ID for service-deploy'\n  cloudctl iam service-policy-create ${serviceIDName} -r Administrator,ClusterAdministrator --service-name 'idmgmt'\n  cloudctl iam service-policy-create ${serviceIDName} -r Administrator,ClusterAdministrator --service-name 'identity'\n  cloudctl iam service-api-key-create ${serviceApiKeyName} ${serviceIDName} -d 'Api key for service-deploy'\n  ```\n\n  The output with the API Key should look something like this:\n  ```\n  Name          service-deploy-api-key\n  Description   Api key for service-deploy\n  Bound To      crn:v1:icp:private:iam-identity:mycluster:n/services::serviceid:ServiceId-163c213a-37f5-4f8b-8a3c-2fd7b3887a4f\n  Created At    2020-01-22T14:46+0000\n  API Key       <API KEY HERE>\n  ```\n\n  Save the API Key for use during install configuration in Step 5b.\n\n4. Load the PPA Archive using `cloudctl` assuming you already logged in from the previous command\n\n  Run the following commands with a user with Cluster Admin access:\n\n  ```\n  docker login -u $(oc whoami) -p $(oc whoami -t) $(oc registry info)\n  cloudctl catalog load-archive --archive <archive-name> --registry $(oc registry info)/services\n  ```\n\n5. Sync CAM Helm Charts\n\n  - Login to MCM UI and sync helm repositories;  Go to **Administer** > **Helm repository**\n  - Click **Sync All** in the upper-right corner\n\n6. Configure and Install CAM\n\n  1. In upper right-hand corner, click the **Catalog** icon\n  2. Search for `ibm-cam` and click the chart from the `local-helm` repository\n  3. Click **Configure** in the bottom-right, or click the **Configuration** tab\n  4. Enter the following install parameters:\n\n  - **Release name** - Enter `cam` in release name.\n  - **Target namespace** - From the drop down list, select `services`.\n  - Select **I have read and agreed to license agreements** to accept the license agreements.\n  - Expand **Parameters** > **All Parameters** section\n  - **Worker node architecture** - select amd64\n  - **Docker image pull secret**: for offline installation, set to *default*\n  - **Product Identifier** - Enter `IBMCloudAutomationManager_5737E67_4100_EE_000` (v1.2) or  `IBMCloudAutomationManager_5737E67_4200_EE_000` (v1.3)\n  - **IAM Service API Key** - Enter the IAM service API Key you created earlier\n  - Optionally, select **Optimize the installation for offline** to optimize the installation for offline. For example, skip internet access to import public starter templates from github.com on the public internet during the installation.\n  - Optionally, select **Enable audit** to enable the audit for actions in Cloud Automation Manager. It requires the management logging service to be installed. For installing the Cloud Automation Manager on IBM Multicloud Manager 3.2.1, select `Enable legacy audit`. For installing the Cloud Automation Manager on IBM Multicloud Manager 3.2.x or higher, select `ICP32`. For audit related installation parameters, see [Installation parameters](https://www.ibm.com/support/knowledgecenter/SS2L37_4.1.0.0/cam_installation_parameters.html?view=kc).\n  - Optionally, select **Enable FIPS for CAM** to enable FIPS.\n  - Under **IBM Cloud Private** > **Port**, enter port value 443, or choose your own port\n  - Under **Image**, set Repository value to `image-registry.openshift-image-registry.svc:5000/services/`\n  - If using Dynamic Storage, Check **Enable Dynamic Provisioning** and set your Storage Class Name. Repeat for each volume. Note that the Storage Class must support RWM mode\n\n  Click **Install**\n\n5. Confirm Installation\n\n  Monitor your install with\n  ```\n  watch oc get pods\n  ```\n\n   You should see something like this:\n\n  ![CAM Install Pods](/assets/img/cp4mcm/cam_install_pods.png)\n\n  Once completed, access CAM in a browser using the url from\n\n  ```\n  oc get routes\n  ```\n\n## Additional Resources\n\n* <a href=\"https://www.ibm.com/support/knowledgecenter/SS2L37_4.1.0.0/cam_prereq.html\">Knowledge Center - CAM Prerequisites</a>\n* <a href=\"https://www.ibm.com/support/knowledgecenter/SS2L37_4.1.0.0/cam_install_offline_icpos.html\">Knowledge Center - CAM Offline Installation Guide</a>\n","type":"Mdx","contentDigest":"e07f3aa1b4a0be10c8a9a1171cf03885","counter":476,"owner":"gatsby-plugin-mdx"},"frontmatter":{"title":"CAM - Installation Guide","weight":500},"exports":{},"rawBody":"---\ntitle: \"CAM - Installation Guide\"\nweight: 500\n---\n\n## Overview\n\n### Prerequisites\n* **OCP 4.0+**\n* **Install CLI Tools**\n  - Helm CLI\n  - Kubernetes CLI\n  - IBM Cloud Pak CLI\n  \n  For CLI install help, check out the Knowledge Center guides <a href=\"https://www.ibm.com/support/knowledgecenter/en/SSFC4F_1.2.0/cli/cli_guide_mcm.html\">here</a>.\n\n\n* [Install MCM](/content/mcm/cp4mcm_mcm_install/)\n* **Install Service Catalog** (Required for OCP 4.0+. See install <a href=\"https://docs.openshift.com/container-platform/4.2/applications/service_brokers/installing-service-catalog.html\">here</a>)\n\n## Online Installation\n\n## Offline Installation\n\n1. Download the installer file from Passport Advantage (PPA):\n\n|         File Name         | Part Number | Version |\n| :-----------------------: | :------ |  :------ |\n| icp-cam-x86_64-4.1.tar.gz | CC4E1EN |  1.2 |\n| IBM_CLOUD_AUTO_MGR_4.2_Lnx.tar.gz | CC5QFEN | 1.3 |\n\n2. Create SCC policy\n\n  ```\n  oc adm policy add-scc-to-user ibm-anyuid-hostpath-scc system:serviceaccount:services:default\n  ```\n\n  *Note*: Persistent volumes with RWX mode is needed for Cloud Automation Manager. Visit <a href=\"https://www.ibm.com/support/knowledgecenter/SS2L37_4.1.0.0/cam_create_pv.html\">here</a> for more information.\n\n3. Generate a deployment ServiceID API Key in the `services` namespace using the following commands:\n\n  ```\n  export serviceIDName='service-deploy'\n  export serviceApiKeyName='service-deploy-api-key'\n  cloudctl login -a <ibm_cloud_pak_mcm_console_url> --skip-ssl-validation -u admin -p <ibm_cloud_pak_mcm_admin_password> -n services\n  cloudctl iam service-id-create ${serviceIDName} -d 'Service ID for service-deploy'\n  cloudctl iam service-policy-create ${serviceIDName} -r Administrator,ClusterAdministrator --service-name 'idmgmt'\n  cloudctl iam service-policy-create ${serviceIDName} -r Administrator,ClusterAdministrator --service-name 'identity'\n  cloudctl iam service-api-key-create ${serviceApiKeyName} ${serviceIDName} -d 'Api key for service-deploy'\n  ```\n\n  The output with the API Key should look something like this:\n  ```\n  Name          service-deploy-api-key\n  Description   Api key for service-deploy\n  Bound To      crn:v1:icp:private:iam-identity:mycluster:n/services::serviceid:ServiceId-163c213a-37f5-4f8b-8a3c-2fd7b3887a4f\n  Created At    2020-01-22T14:46+0000\n  API Key       <API KEY HERE>\n  ```\n\n  Save the API Key for use during install configuration in Step 5b.\n\n4. Load the PPA Archive using `cloudctl` assuming you already logged in from the previous command\n\n  Run the following commands with a user with Cluster Admin access:\n\n  ```\n  docker login -u $(oc whoami) -p $(oc whoami -t) $(oc registry info)\n  cloudctl catalog load-archive --archive <archive-name> --registry $(oc registry info)/services\n  ```\n\n5. Sync CAM Helm Charts\n\n  - Login to MCM UI and sync helm repositories;  Go to **Administer** > **Helm repository**\n  - Click **Sync All** in the upper-right corner\n\n6. Configure and Install CAM\n\n  1. In upper right-hand corner, click the **Catalog** icon\n  2. Search for `ibm-cam` and click the chart from the `local-helm` repository\n  3. Click **Configure** in the bottom-right, or click the **Configuration** tab\n  4. Enter the following install parameters:\n\n  - **Release name** - Enter `cam` in release name.\n  - **Target namespace** - From the drop down list, select `services`.\n  - Select **I have read and agreed to license agreements** to accept the license agreements.\n  - Expand **Parameters** > **All Parameters** section\n  - **Worker node architecture** - select amd64\n  - **Docker image pull secret**: for offline installation, set to *default*\n  - **Product Identifier** - Enter `IBMCloudAutomationManager_5737E67_4100_EE_000` (v1.2) or  `IBMCloudAutomationManager_5737E67_4200_EE_000` (v1.3)\n  - **IAM Service API Key** - Enter the IAM service API Key you created earlier\n  - Optionally, select **Optimize the installation for offline** to optimize the installation for offline. For example, skip internet access to import public starter templates from github.com on the public internet during the installation.\n  - Optionally, select **Enable audit** to enable the audit for actions in Cloud Automation Manager. It requires the management logging service to be installed. For installing the Cloud Automation Manager on IBM Multicloud Manager 3.2.1, select `Enable legacy audit`. For installing the Cloud Automation Manager on IBM Multicloud Manager 3.2.x or higher, select `ICP32`. For audit related installation parameters, see [Installation parameters](https://www.ibm.com/support/knowledgecenter/SS2L37_4.1.0.0/cam_installation_parameters.html?view=kc).\n  - Optionally, select **Enable FIPS for CAM** to enable FIPS.\n  - Under **IBM Cloud Private** > **Port**, enter port value 443, or choose your own port\n  - Under **Image**, set Repository value to `image-registry.openshift-image-registry.svc:5000/services/`\n  - If using Dynamic Storage, Check **Enable Dynamic Provisioning** and set your Storage Class Name. Repeat for each volume. Note that the Storage Class must support RWM mode\n\n  Click **Install**\n\n5. Confirm Installation\n\n  Monitor your install with\n  ```\n  watch oc get pods\n  ```\n\n   You should see something like this:\n\n  ![CAM Install Pods](/assets/img/cp4mcm/cam_install_pods.png)\n\n  Once completed, access CAM in a browser using the url from\n\n  ```\n  oc get routes\n  ```\n\n## Additional Resources\n\n* <a href=\"https://www.ibm.com/support/knowledgecenter/SS2L37_4.1.0.0/cam_prereq.html\">Knowledge Center - CAM Prerequisites</a>\n* <a href=\"https://www.ibm.com/support/knowledgecenter/SS2L37_4.1.0.0/cam_install_offline_icpos.html\">Knowledge Center - CAM Offline Installation Guide</a>\n","fileAbsolutePath":"/home/travis/build/ibm-cloud-architecture/cloudpak8s/src/pages/mcm/cp4mcm_cam_install/index.mdx"}}}}