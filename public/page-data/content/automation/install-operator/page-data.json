{"componentChunkName":"component---src-pages-content-automation-install-operator-md","path":"/content/automation/install-operator/","result":{"pageContext":{"frontmatter":{"title":"Install Cloud Pak for Automation Operator","weight":400},"relativePagePath":"/content/automation/install-operator.md","titleType":"page","MdxNode":{"id":"e03be0f8-0cda-5b73-abb0-348c117cc40d","children":[],"parent":"58ebf2b2-7412-5eb7-9d55-d32e0b80cb57","internal":{"content":"---\ntitle: Install Cloud Pak for Automation Operator\nweight: 400\n---\n- \n# make sure there is a space after the - so that the TOC is generated\n{:toc}\n\nStarting with version 19.0.3, the Cloud Pak for Automation components install is supported by an OCP operator.\nThe install steps for the operator are the following.\n\n### Create your CP4A project\nYour CP4A project will contain all the components that are deployed through the operator.\nIn the rest of this documentation, we use `cp4a` as the name of our OCP project.\n\n- Login to your cluster:\n```\noc login -u <admin> -p <password>\n```\n\n- Create the project and add privileges to it. \n```\noc new-project cp4a\noc adm policy add-scc-to-user privileged -z default\n```\n\n### Prepare the PV and PVC\n\n- On the NFS server, under the root of an exported directory (look at the `/etc/export` file to view the exported directories), create a folder for the JDBC drivers and copy these drivers into it:\n```\nmkdir /storage/persistentvolumes/operator/jdbc/db2\ncp /opt/ibm/db2/V11.1/java/db2jcc4.jar /nfs/persistentvolumes/operator/jdbc/db2/\ncp /opt/ibm/db2/V11.1/java/db2jcc_license_cu.jar /nfs/persistentvolumes/operator/jdbc/db2/\n```\n\n- Copy this [`operator-shared-pv.yaml`](/assets/automation/operator/operator-shared-pv.yaml) template file to your working directory and update it as needed. In particular, update the `nfs:path` and `nfs:server` properties to fit your NFS setup.\n\n- Deploy the PV:\n```\n$ oc apply -f operator-shared-pv.yaml\n```\n\n- Copy this [`operator-shared-pvc.yaml`](/assets/automation/operator/operator-shared-pvc.yaml) template file to your working directory and update it as needed. In particular, update the `metadata:namespace` property.\n\n- Deploy the PVC:\n```\n$ oc apply -f operator-shared-pvc.yaml\n```\n\n### Deploy the operator\n\n- In your working directory, download the necessary scripts and Kubernetes descriptors:\n```\n$ git clone https://github.com/icp4a/cert-kubernetes.git\n```\n\n- If you are using local registry, change directory to `./cert-kubernetes` and run the `deployOperator.sh` script:\n```\ncd cert-kubernetes/\n./scripts/deployOperator.sh -i $(oc registry info)/cp4a-operator/icp4a-operator:19.0.3\n```\n\n- If you are using IBM Cloud registry, change directory to `./cert-kubernetes` and run the `deployOperator.sh` script:\n```\ncd cert-kubernetes/\n./scripts/deployOperator.sh cp.icr.io/cp/cp4a/icp4a-operator:19.0.3 -p 'cp-entitlement'\n```\nwhere `cp-entitlement` is the name of the secret created to access to the remote registry.\n\n- Verify that the operator is running:\n```\noc get pods\nNAME                                 READY     STATUS    RESTARTS   AGE\nibm-cp4a-operator-7db5cfbb64-mgb2c   2/2       Running   0          5h\n```\n","type":"Mdx","contentDigest":"9727c7e9d79e715ccbb5169fa209370c","counter":202,"owner":"gatsby-plugin-mdx"},"frontmatter":{"title":"Install Cloud Pak for Automation Operator","weight":400},"exports":{},"rawBody":"---\ntitle: Install Cloud Pak for Automation Operator\nweight: 400\n---\n- \n# make sure there is a space after the - so that the TOC is generated\n{:toc}\n\nStarting with version 19.0.3, the Cloud Pak for Automation components install is supported by an OCP operator.\nThe install steps for the operator are the following.\n\n### Create your CP4A project\nYour CP4A project will contain all the components that are deployed through the operator.\nIn the rest of this documentation, we use `cp4a` as the name of our OCP project.\n\n- Login to your cluster:\n```\noc login -u <admin> -p <password>\n```\n\n- Create the project and add privileges to it. \n```\noc new-project cp4a\noc adm policy add-scc-to-user privileged -z default\n```\n\n### Prepare the PV and PVC\n\n- On the NFS server, under the root of an exported directory (look at the `/etc/export` file to view the exported directories), create a folder for the JDBC drivers and copy these drivers into it:\n```\nmkdir /storage/persistentvolumes/operator/jdbc/db2\ncp /opt/ibm/db2/V11.1/java/db2jcc4.jar /nfs/persistentvolumes/operator/jdbc/db2/\ncp /opt/ibm/db2/V11.1/java/db2jcc_license_cu.jar /nfs/persistentvolumes/operator/jdbc/db2/\n```\n\n- Copy this [`operator-shared-pv.yaml`](/assets/automation/operator/operator-shared-pv.yaml) template file to your working directory and update it as needed. In particular, update the `nfs:path` and `nfs:server` properties to fit your NFS setup.\n\n- Deploy the PV:\n```\n$ oc apply -f operator-shared-pv.yaml\n```\n\n- Copy this [`operator-shared-pvc.yaml`](/assets/automation/operator/operator-shared-pvc.yaml) template file to your working directory and update it as needed. In particular, update the `metadata:namespace` property.\n\n- Deploy the PVC:\n```\n$ oc apply -f operator-shared-pvc.yaml\n```\n\n### Deploy the operator\n\n- In your working directory, download the necessary scripts and Kubernetes descriptors:\n```\n$ git clone https://github.com/icp4a/cert-kubernetes.git\n```\n\n- If you are using local registry, change directory to `./cert-kubernetes` and run the `deployOperator.sh` script:\n```\ncd cert-kubernetes/\n./scripts/deployOperator.sh -i $(oc registry info)/cp4a-operator/icp4a-operator:19.0.3\n```\n\n- If you are using IBM Cloud registry, change directory to `./cert-kubernetes` and run the `deployOperator.sh` script:\n```\ncd cert-kubernetes/\n./scripts/deployOperator.sh cp.icr.io/cp/cp4a/icp4a-operator:19.0.3 -p 'cp-entitlement'\n```\nwhere `cp-entitlement` is the name of the secret created to access to the remote registry.\n\n- Verify that the operator is running:\n```\noc get pods\nNAME                                 READY     STATUS    RESTARTS   AGE\nibm-cp4a-operator-7db5cfbb64-mgb2c   2/2       Running   0          5h\n```\n","fileAbsolutePath":"/Users/davethiessen/github/cloudpak8s/src/pages/content/automation/install-operator.md"}}}}