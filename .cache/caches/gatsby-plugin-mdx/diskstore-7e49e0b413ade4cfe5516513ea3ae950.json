{"expireTime":9007200838013544000,"key":"gatsby-plugin-mdx-entire-payload-992853e36a75b6fc461e0e7b87a8aca5-","val":{"mdast":{"type":"root","children":[{"type":"import","value":"import DefaultLayout from \"/Users/davethiessen/github/cloudpak8s/node_modules/gatsby-theme-carbon/src/templates/Default.js\"","position":{"start":{"line":3,"column":1,"offset":2},"end":{"line":3,"column":124,"offset":125},"indent":[]}},{"type":"export","default":true,"value":"export default DefaultLayout","position":{"start":{"line":5,"column":1,"offset":127},"end":{"line":5,"column":29,"offset":155},"indent":[]}},{"type":"list","ordered":false,"start":null,"spread":false,"children":[{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"{:toc}","position":{"start":{"line":8,"column":1,"offset":160},"end":{"line":8,"column":7,"offset":166},"indent":[]}}],"position":{"start":{"line":8,"column":1,"offset":160},"end":{"line":8,"column":7,"offset":166},"indent":[]}}],"position":{"start":{"line":7,"column":1,"offset":157},"end":{"line":8,"column":7,"offset":166},"indent":[1]}}],"position":{"start":{"line":7,"column":1,"offset":157},"end":{"line":8,"column":7,"offset":166},"indent":[1]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"Subscription to a Helm Repository Channel","position":{"start":{"line":10,"column":4,"offset":171},"end":{"line":10,"column":45,"offset":212},"indent":[]}}],"position":{"start":{"line":10,"column":1,"offset":168},"end":{"line":10,"column":45,"offset":212},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"In this task, you define a ","position":{"start":{"line":12,"column":1,"offset":214},"end":{"line":12,"column":28,"offset":241},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"helm repository subscription channel","position":{"start":{"line":12,"column":30,"offset":243},"end":{"line":12,"column":66,"offset":279},"indent":[]}}],"position":{"start":{"line":12,"column":28,"offset":241},"end":{"line":12,"column":68,"offset":281},"indent":[]}},{"type":"text","value":" and ","position":{"start":{"line":12,"column":68,"offset":281},"end":{"line":12,"column":73,"offset":286},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"subscribe","position":{"start":{"line":12,"column":75,"offset":288},"end":{"line":12,"column":84,"offset":297},"indent":[]}}],"position":{"start":{"line":12,"column":73,"offset":286},"end":{"line":12,"column":86,"offset":299},"indent":[]}},{"type":"text","value":" to that ","position":{"start":{"line":12,"column":86,"offset":299},"end":{"line":12,"column":95,"offset":308},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"channel","position":{"start":{"line":12,"column":97,"offset":310},"end":{"line":12,"column":104,"offset":317},"indent":[]}}],"position":{"start":{"line":12,"column":95,"offset":308},"end":{"line":12,"column":106,"offset":319},"indent":[]}},{"type":"text","value":". The channel is of type ","position":{"start":{"line":12,"column":106,"offset":319},"end":{"line":12,"column":131,"offset":344},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"HelmRepo","position":{"start":{"line":12,"column":133,"offset":346},"end":{"line":12,"column":141,"offset":354},"indent":[]}}],"position":{"start":{"line":12,"column":131,"offset":344},"end":{"line":12,"column":143,"offset":356},"indent":[]}},{"type":"text","value":", meaning that the yaml you create will be deployed and stored in a Helm chart.\nVarious tasks associated are","position":{"start":{"line":12,"column":143,"offset":356},"end":{"line":13,"column":29,"offset":464},"indent":[1]}}],"position":{"start":{"line":12,"column":1,"offset":214},"end":{"line":13,"column":29,"offset":464},"indent":[1]}},{"type":"list","ordered":false,"start":null,"spread":false,"children":[{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Look at the bookinfo application","position":{"start":{"line":14,"column":3,"offset":467},"end":{"line":14,"column":35,"offset":499},"indent":[]}}],"position":{"start":{"line":14,"column":3,"offset":467},"end":{"line":14,"column":35,"offset":499},"indent":[]}}],"position":{"start":{"line":14,"column":1,"offset":465},"end":{"line":14,"column":35,"offset":499},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Deploy the channel","position":{"start":{"line":15,"column":3,"offset":502},"end":{"line":15,"column":21,"offset":520},"indent":[]}}],"position":{"start":{"line":15,"column":3,"offset":502},"end":{"line":15,"column":21,"offset":520},"indent":[]}}],"position":{"start":{"line":15,"column":1,"offset":500},"end":{"line":15,"column":21,"offset":520},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Define the helm repo subscription model","position":{"start":{"line":16,"column":3,"offset":523},"end":{"line":16,"column":42,"offset":562},"indent":[]}}],"position":{"start":{"line":16,"column":3,"offset":523},"end":{"line":16,"column":42,"offset":562},"indent":[]}}],"position":{"start":{"line":16,"column":1,"offset":521},"end":{"line":16,"column":42,"offset":562},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Deploy the subscription","position":{"start":{"line":17,"column":3,"offset":565},"end":{"line":17,"column":26,"offset":588},"indent":[]}}],"position":{"start":{"line":17,"column":3,"offset":565},"end":{"line":17,"column":26,"offset":588},"indent":[]}}],"position":{"start":{"line":17,"column":1,"offset":563},"end":{"line":17,"column":26,"offset":588},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Check the application","position":{"start":{"line":18,"column":3,"offset":591},"end":{"line":18,"column":24,"offset":612},"indent":[]}}],"position":{"start":{"line":18,"column":3,"offset":591},"end":{"line":18,"column":24,"offset":612},"indent":[]}}],"position":{"start":{"line":18,"column":1,"offset":589},"end":{"line":18,"column":24,"offset":612},"indent":[]}}],"position":{"start":{"line":14,"column":1,"offset":465},"end":{"line":18,"column":24,"offset":612},"indent":[1,1,1,1]}},{"type":"heading","depth":3,"children":[{"type":"text","value":"Bookinfo Application","position":{"start":{"line":20,"column":5,"offset":618},"end":{"line":20,"column":25,"offset":638},"indent":[]}}],"position":{"start":{"line":20,"column":1,"offset":614},"end":{"line":20,"column":25,"offset":638},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"You will use bookinfo application to deploy as a helm chart. The application is available as helm chart at ","position":{"start":{"line":22,"column":1,"offset":640},"end":{"line":22,"column":108,"offset":747},"indent":[]}},{"type":"emphasis","children":[{"type":"link","title":null,"url":"https://github.com/hybrid-ops/subscription-examples","children":[{"type":"text","value":"https://github.com/hybrid-ops/subscription-examples","position":{"start":{"line":22,"column":109,"offset":748},"end":{"line":22,"column":160,"offset":799},"indent":[]}}],"position":{"start":{"line":22,"column":109,"offset":748},"end":{"line":22,"column":160,"offset":799},"indent":[]}}],"position":{"start":{"line":22,"column":108,"offset":747},"end":{"line":22,"column":161,"offset":800},"indent":[]}},{"type":"text","value":" along with the required resource definitions. You will this github as helm repository.\nNavigate to bookinfo folder, ","position":{"start":{"line":22,"column":161,"offset":800},"end":{"line":23,"column":30,"offset":917},"indent":[1]}},{"type":"emphasis","children":[{"type":"link","title":null,"url":"https://github.com/hybrid-ops/subscription-examples/tree/master/bookinfo","children":[{"type":"text","value":"https://github.com/hybrid-ops/subscription-examples/tree/master/bookinfo","position":{"start":{"line":23,"column":31,"offset":918},"end":{"line":23,"column":103,"offset":990},"indent":[]}}],"position":{"start":{"line":23,"column":31,"offset":918},"end":{"line":23,"column":103,"offset":990},"indent":[]}}],"position":{"start":{"line":23,"column":30,"offset":917},"end":{"line":23,"column":104,"offset":991},"indent":[]}},{"type":"text","value":" for the required prerequsites. This folder has three files","position":{"start":{"line":23,"column":104,"offset":991},"end":{"line":23,"column":163,"offset":1050},"indent":[]}}],"position":{"start":{"line":22,"column":1,"offset":640},"end":{"line":23,"column":163,"offset":1050},"indent":[1]}},{"type":"list","ordered":false,"start":null,"spread":false,"children":[{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"prereqs.yaml - creates bookinfo namespace and creates the required image policy for bookinfo container","position":{"start":{"line":24,"column":3,"offset":1053},"end":{"line":24,"column":105,"offset":1155},"indent":[]}}],"position":{"start":{"line":24,"column":3,"offset":1053},"end":{"line":24,"column":105,"offset":1155},"indent":[]}}],"position":{"start":{"line":24,"column":1,"offset":1051},"end":{"line":24,"column":105,"offset":1155},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"prereqs-ns.yaml - creates the namespaces bookinfo-entitilement and bookinfo-project for the channel and subscriptions","position":{"start":{"line":25,"column":3,"offset":1158},"end":{"line":25,"column":120,"offset":1275},"indent":[]}}],"position":{"start":{"line":25,"column":3,"offset":1158},"end":{"line":25,"column":120,"offset":1275},"indent":[]}}],"position":{"start":{"line":25,"column":1,"offset":1156},"end":{"line":25,"column":120,"offset":1275},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"ip.yaml - Creates the required image security policy for the the example bookinfo product page.","position":{"start":{"line":26,"column":3,"offset":1278},"end":{"line":26,"column":98,"offset":1373},"indent":[]}}],"position":{"start":{"line":26,"column":3,"offset":1278},"end":{"line":26,"column":98,"offset":1373},"indent":[]}}],"position":{"start":{"line":26,"column":1,"offset":1276},"end":{"line":26,"column":98,"offset":1373},"indent":[]}}],"position":{"start":{"line":24,"column":1,"offset":1051},"end":{"line":26,"column":98,"offset":1373},"indent":[1,1]}},{"type":"paragraph","children":[{"type":"text","value":"You can copy the files to your local workstation and run the commands","position":{"start":{"line":28,"column":1,"offset":1375},"end":{"line":28,"column":70,"offset":1444},"indent":[]}}],"position":{"start":{"line":28,"column":1,"offset":1375},"end":{"line":28,"column":70,"offset":1444},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Once, you log in to the OpenShift command line of ","position":{"start":{"line":30,"column":1,"offset":1446},"end":{"line":30,"column":51,"offset":1496},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"MCM Hub","position":{"start":{"line":30,"column":53,"offset":1498},"end":{"line":30,"column":60,"offset":1505},"indent":[]}}],"position":{"start":{"line":30,"column":51,"offset":1496},"end":{"line":30,"column":62,"offset":1507},"indent":[]}},{"type":"text","value":", run the commands","position":{"start":{"line":30,"column":62,"offset":1507},"end":{"line":30,"column":80,"offset":1525},"indent":[]}}],"position":{"start":{"line":30,"column":1,"offset":1446},"end":{"line":30,"column":80,"offset":1525},"indent":[]}},{"type":"code","lang":null,"meta":null,"value":"oc apply -f prereqs.yaml\noc apply -f prereqs-ns.yaml\noc apply -f ip.yaml","position":{"start":{"line":31,"column":1,"offset":1526},"end":{"line":35,"column":4,"offset":1606},"indent":[1,1,1,1]}},{"type":"heading","depth":3,"children":[{"type":"text","value":"Create the Channel","position":{"start":{"line":37,"column":5,"offset":1612},"end":{"line":37,"column":23,"offset":1630},"indent":[]}}],"position":{"start":{"line":37,"column":1,"offset":1608},"end":{"line":37,"column":23,"offset":1630},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"You will use the file, bookinfo-channel.yaml in ","position":{"start":{"line":39,"column":1,"offset":1632},"end":{"line":39,"column":49,"offset":1680},"indent":[]}},{"type":"emphasis","children":[{"type":"link","title":null,"url":"https://github.com/hybrid-ops/subscription-examples/tree/master/bookinfo-entitlement","children":[{"type":"text","value":"https://github.com/hybrid-ops/subscription-examples/tree/master/bookinfo-entitlement","position":{"start":{"line":39,"column":50,"offset":1681},"end":{"line":39,"column":134,"offset":1765},"indent":[]}}],"position":{"start":{"line":39,"column":50,"offset":1681},"end":{"line":39,"column":134,"offset":1765},"indent":[]}}],"position":{"start":{"line":39,"column":49,"offset":1680},"end":{"line":39,"column":135,"offset":1766},"indent":[]}},{"type":"text","value":" to create the required the channel. You can download the file to run locally. This resource file defines the channel for helm repository ","position":{"start":{"line":39,"column":135,"offset":1766},"end":{"line":39,"column":273,"offset":1904},"indent":[]}},{"type":"strong","children":[{"type":"link","title":null,"url":"https://raw.githubusercontent.com/dymaczew/charts/master/repo/incubator/","children":[{"type":"text","value":"https://raw.githubusercontent.com/dymaczew/charts/master/repo/incubator/","position":{"start":{"line":39,"column":275,"offset":1906},"end":{"line":39,"column":347,"offset":1978},"indent":[]}}],"position":{"start":{"line":39,"column":275,"offset":1906},"end":{"line":39,"column":347,"offset":1978},"indent":[]}}],"position":{"start":{"line":39,"column":273,"offset":1904},"end":{"line":39,"column":349,"offset":1980},"indent":[]}}],"position":{"start":{"line":39,"column":1,"offset":1632},"end":{"line":39,"column":349,"offset":1980},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Log in to the MCM Hub and run the command","position":{"start":{"line":41,"column":1,"offset":1982},"end":{"line":41,"column":42,"offset":2023},"indent":[]}}],"position":{"start":{"line":41,"column":1,"offset":1982},"end":{"line":41,"column":42,"offset":2023},"indent":[]}},{"type":"code","lang":null,"meta":null,"value":"oc apply -f bookinfo-channel.yaml","position":{"start":{"line":42,"column":1,"offset":2024},"end":{"line":44,"column":4,"offset":2065},"indent":[1,1]}},{"type":"paragraph","children":[{"type":"text","value":"Check if the channel is created:","position":{"start":{"line":46,"column":1,"offset":2067},"end":{"line":46,"column":33,"offset":2099},"indent":[]}}],"position":{"start":{"line":46,"column":1,"offset":2067},"end":{"line":46,"column":33,"offset":2099},"indent":[]}},{"type":"code","lang":null,"meta":null,"value":"oc project bookinfo-project\noc get channel","position":{"start":{"line":47,"column":1,"offset":2100},"end":{"line":50,"column":4,"offset":2150},"indent":[1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"The output should look equivalent to","position":{"start":{"line":52,"column":1,"offset":2152},"end":{"line":52,"column":37,"offset":2188},"indent":[]}}],"position":{"start":{"line":52,"column":1,"offset":2152},"end":{"line":52,"column":37,"offset":2188},"indent":[]}},{"type":"code","lang":null,"meta":null,"value":"bookinfo-channel   HelmRepo   https://raw.githubusercontent.com/dymaczew/charts/master/repo/incubator/   122m","position":{"start":{"line":54,"column":1,"offset":2190},"end":{"line":56,"column":4,"offset":2307},"indent":[1,1]}},{"type":"paragraph","children":[{"type":"text","value":"This also can be varified in the console. Click the hambuger icon -> Manage Applications. Then launch the ","position":{"start":{"line":58,"column":1,"offset":2309},"end":{"line":58,"column":107,"offset":2415},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"Resources","position":{"start":{"line":58,"column":109,"offset":2417},"end":{"line":58,"column":118,"offset":2426},"indent":[]}}],"position":{"start":{"line":58,"column":107,"offset":2415},"end":{"line":58,"column":120,"offset":2428},"indent":[]}},{"type":"text","value":" tab which shows the channel that is just created.","position":{"start":{"line":58,"column":120,"offset":2428},"end":{"line":58,"column":170,"offset":2478},"indent":[]}}],"position":{"start":{"line":58,"column":1,"offset":2309},"end":{"line":58,"column":170,"offset":2478},"indent":[]}},{"type":"paragraph","children":[{"type":"image","title":null,"url":"/assets/img/cp4mcm/mcm-channel.jpg","alt":"Channel Image","position":{"start":{"line":60,"column":1,"offset":2480},"end":{"line":60,"column":53,"offset":2532},"indent":[]}}],"position":{"start":{"line":60,"column":1,"offset":2480},"end":{"line":60,"column":53,"offset":2532},"indent":[]}},{"type":"heading","depth":3,"children":[{"type":"text","value":"Create the Subscription","position":{"start":{"line":62,"column":5,"offset":2538},"end":{"line":62,"column":28,"offset":2561},"indent":[]}}],"position":{"start":{"line":62,"column":1,"offset":2534},"end":{"line":62,"column":28,"offset":2561},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"You will use the file, bookinfo-app.yaml in ","position":{"start":{"line":64,"column":1,"offset":2563},"end":{"line":64,"column":45,"offset":2607},"indent":[]}},{"type":"emphasis","children":[{"type":"link","title":null,"url":"https://github.com/hybrid-ops/subscription-examples/blob/master/bookinfo-project/bookinfo-app.yaml","children":[{"type":"text","value":"https://github.com/hybrid-ops/subscription-examples/blob/master/bookinfo-project/bookinfo-app.yaml","position":{"start":{"line":64,"column":46,"offset":2608},"end":{"line":64,"column":144,"offset":2706},"indent":[]}}],"position":{"start":{"line":64,"column":46,"offset":2608},"end":{"line":64,"column":144,"offset":2706},"indent":[]}}],"position":{"start":{"line":64,"column":45,"offset":2607},"end":{"line":64,"column":145,"offset":2707},"indent":[]}},{"type":"text","value":" to create the required subscription with a placement policy. If you examine the file, you will find  that the placement rule is set to ","position":{"start":{"line":64,"column":145,"offset":2707},"end":{"line":64,"column":281,"offset":2843},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"environment: Demo","position":{"start":{"line":64,"column":283,"offset":2845},"end":{"line":64,"column":300,"offset":2862},"indent":[]}}],"position":{"start":{"line":64,"column":281,"offset":2843},"end":{"line":64,"column":302,"offset":2864},"indent":[]}},{"type":"text","value":". So, ensure that label is set on your target cluster where you want the application to deployed to.\nAlso, edit the file to modify the route according to your environment.","position":{"start":{"line":64,"column":302,"offset":2864},"end":{"line":65,"column":71,"offset":3035},"indent":[1]}}],"position":{"start":{"line":64,"column":1,"offset":2563},"end":{"line":65,"column":71,"offset":3035},"indent":[1]}},{"type":"paragraph","children":[{"type":"image","title":null,"url":"/assets/img/cp4mcm/mcm-modifyroute.jpg","alt":"Modify Route","position":{"start":{"line":67,"column":1,"offset":3037},"end":{"line":67,"column":56,"offset":3092},"indent":[]}}],"position":{"start":{"line":67,"column":1,"offset":3037},"end":{"line":67,"column":56,"offset":3092},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"After the modification of the route, run the command to deploy the application","position":{"start":{"line":69,"column":1,"offset":3094},"end":{"line":69,"column":79,"offset":3172},"indent":[]}}],"position":{"start":{"line":69,"column":1,"offset":3094},"end":{"line":69,"column":79,"offset":3172},"indent":[]}},{"type":"code","lang":null,"meta":null,"value":"oc apply -f bookinfo-app.yaml","position":{"start":{"line":71,"column":1,"offset":3174},"end":{"line":73,"column":4,"offset":3211},"indent":[1,1]}},{"type":"paragraph","children":[{"type":"text","value":"The application should be deployed. You can check if the subscription is propogated","position":{"start":{"line":75,"column":1,"offset":3213},"end":{"line":75,"column":84,"offset":3296},"indent":[]}}],"position":{"start":{"line":75,"column":1,"offset":3213},"end":{"line":75,"column":84,"offset":3296},"indent":[]}},{"type":"code","lang":null,"meta":null,"value":"oc get appsub --all-namespaces","position":{"start":{"line":77,"column":1,"offset":3298},"end":{"line":79,"column":4,"offset":3336},"indent":[1,1]}},{"type":"paragraph","children":[{"type":"text","value":"The output will look similar to","position":{"start":{"line":81,"column":1,"offset":3338},"end":{"line":81,"column":32,"offset":3369},"indent":[]}}],"position":{"start":{"line":81,"column":1,"offset":3338},"end":{"line":81,"column":32,"offset":3369},"indent":[]}},{"type":"code","lang":null,"meta":null,"value":"bookinfo-project   bookinfo-subscription   Propagated   141m","position":{"start":{"line":83,"column":1,"offset":3371},"end":{"line":85,"column":4,"offset":3439},"indent":[1,1]}},{"type":"paragraph","children":[{"type":"text","value":"You also can check the console. Click the hambuger icon -> Manage Applications -> Overview\n","position":{"start":{"line":87,"column":1,"offset":3441},"end":{"line":88,"column":1,"offset":3532},"indent":[1]}},{"type":"image","title":null,"url":"/assets/img/cp4mcm/mcm-applications.jpg","alt":"Applications Overview","position":{"start":{"line":88,"column":1,"offset":3532},"end":{"line":88,"column":66,"offset":3597},"indent":[]}}],"position":{"start":{"line":87,"column":1,"offset":3441},"end":{"line":88,"column":66,"offset":3597},"indent":[1]}},{"type":"paragraph","children":[{"type":"text","value":"Now, click the application bookinfo-app to view the various resources involved with the subscription.\n","position":{"start":{"line":90,"column":1,"offset":3599},"end":{"line":91,"column":1,"offset":3701},"indent":[1]}},{"type":"image","title":null,"url":"/assets/img/cp4mcm/mcm-appdetails.jpg","alt":"Application Details","position":{"start":{"line":91,"column":1,"offset":3701},"end":{"line":91,"column":62,"offset":3762},"indent":[]}}],"position":{"start":{"line":90,"column":1,"offset":3599},"end":{"line":91,"column":62,"offset":3762},"indent":[1]}},{"type":"paragraph","children":[{"type":"text","value":"Hover over the placement rule to see the placement rule of the application\n","position":{"start":{"line":93,"column":1,"offset":3764},"end":{"line":94,"column":1,"offset":3839},"indent":[1]}},{"type":"image","title":null,"url":"/assets/img/cp4mcm/mcm-appdetails1.jpg","alt":"Placement Rule Visualization","position":{"start":{"line":94,"column":1,"offset":3839},"end":{"line":94,"column":72,"offset":3910},"indent":[]}}],"position":{"start":{"line":93,"column":1,"offset":3764},"end":{"line":94,"column":72,"offset":3910},"indent":[1]}},{"type":"paragraph","children":[{"type":"text","value":"If you don't see the application propogated, you may have to check the placement rule and ensure the rule matches to at least one cluster in your environment.","position":{"start":{"line":96,"column":1,"offset":3912},"end":{"line":96,"column":159,"offset":4070},"indent":[]}}],"position":{"start":{"line":96,"column":1,"offset":3912},"end":{"line":96,"column":159,"offset":4070},"indent":[]}},{"type":"export","value":"export const _frontmatter = {}","position":{"start":{"line":99,"column":1,"offset":4073},"end":{"line":99,"column":31,"offset":4103},"indent":[]}}],"position":{"start":{"line":1,"column":1,"offset":0},"end":{"line":99,"column":31,"offset":4103}}},"scopeImports":[],"scopeIdentifiers":[],"rawMDXOutput":"/* @jsx mdx */\nimport { mdx } from '@mdx-js/react';\n/* @jsx mdx */\nimport DefaultLayout from \"/Users/davethiessen/github/cloudpak8s/node_modules/gatsby-theme-carbon/src/templates/Default.js\"\nexport const _frontmatter = {};\nconst makeShortcode = name => function MDXDefaultShortcode(props) {\n  console.warn(\"Component \" + name + \" was not imported, exported, or provided by MDXProvider as global scope\")\n  return <div {...props}/>\n};\n\nconst layoutProps = {\n  _frontmatter\n};\nconst MDXLayout = DefaultLayout\nexport default function MDXContent({\n  components,\n  ...props\n}) {\n  return <MDXLayout {...layoutProps} {...props} components={components} mdxType=\"MDXLayout\">\n\n\n    <ul>\n      <li parentName=\"ul\">{`{:toc}`}</li>\n    </ul>\n    <h2>{`Subscription to a Helm Repository Channel`}</h2>\n    <p>{`In this task, you define a `}<strong parentName=\"p\">{`helm repository subscription channel`}</strong>{` and `}<strong parentName=\"p\">{`subscribe`}</strong>{` to that `}<strong parentName=\"p\">{`channel`}</strong>{`. The channel is of type `}<strong parentName=\"p\">{`HelmRepo`}</strong>{`, meaning that the yaml you create will be deployed and stored in a Helm chart.\nVarious tasks associated are`}</p>\n    <ul>\n      <li parentName=\"ul\">{`Look at the bookinfo application`}</li>\n      <li parentName=\"ul\">{`Deploy the channel`}</li>\n      <li parentName=\"ul\">{`Define the helm repo subscription model`}</li>\n      <li parentName=\"ul\">{`Deploy the subscription`}</li>\n      <li parentName=\"ul\">{`Check the application`}</li>\n    </ul>\n    <h3>{`Bookinfo Application`}</h3>\n    <p>{`You will use bookinfo application to deploy as a helm chart. The application is available as helm chart at `}<em parentName=\"p\"><a parentName=\"em\" {...{\n          \"href\": \"https://github.com/hybrid-ops/subscription-examples\"\n        }}>{`https://github.com/hybrid-ops/subscription-examples`}</a></em>{` along with the required resource definitions. You will this github as helm repository.\nNavigate to bookinfo folder, `}<em parentName=\"p\"><a parentName=\"em\" {...{\n          \"href\": \"https://github.com/hybrid-ops/subscription-examples/tree/master/bookinfo\"\n        }}>{`https://github.com/hybrid-ops/subscription-examples/tree/master/bookinfo`}</a></em>{` for the required prerequsites. This folder has three files`}</p>\n    <ul>\n      <li parentName=\"ul\">{`prereqs.yaml - creates bookinfo namespace and creates the required image policy for bookinfo container`}</li>\n      <li parentName=\"ul\">{`prereqs-ns.yaml - creates the namespaces bookinfo-entitilement and bookinfo-project for the channel and subscriptions`}</li>\n      <li parentName=\"ul\">{`ip.yaml - Creates the required image security policy for the the example bookinfo product page.`}</li>\n    </ul>\n    <p>{`You can copy the files to your local workstation and run the commands`}</p>\n    <p>{`Once, you log in to the OpenShift command line of `}<strong parentName=\"p\">{`MCM Hub`}</strong>{`, run the commands`}</p>\n    <pre><code parentName=\"pre\" {...{}}>{`oc apply -f prereqs.yaml\noc apply -f prereqs-ns.yaml\noc apply -f ip.yaml\n`}</code></pre>\n    <h3>{`Create the Channel`}</h3>\n    <p>{`You will use the file, bookinfo-channel.yaml in `}<em parentName=\"p\"><a parentName=\"em\" {...{\n          \"href\": \"https://github.com/hybrid-ops/subscription-examples/tree/master/bookinfo-entitlement\"\n        }}>{`https://github.com/hybrid-ops/subscription-examples/tree/master/bookinfo-entitlement`}</a></em>{` to create the required the channel. You can download the file to run locally. This resource file defines the channel for helm repository `}<strong parentName=\"p\"><a parentName=\"strong\" {...{\n          \"href\": \"https://raw.githubusercontent.com/dymaczew/charts/master/repo/incubator/\"\n        }}>{`https://raw.githubusercontent.com/dymaczew/charts/master/repo/incubator/`}</a></strong></p>\n    <p>{`Log in to the MCM Hub and run the command`}</p>\n    <pre><code parentName=\"pre\" {...{}}>{`oc apply -f bookinfo-channel.yaml\n`}</code></pre>\n    <p>{`Check if the channel is created:`}</p>\n    <pre><code parentName=\"pre\" {...{}}>{`oc project bookinfo-project\noc get channel\n`}</code></pre>\n    <p>{`The output should look equivalent to`}</p>\n    <pre><code parentName=\"pre\" {...{}}>{`bookinfo-channel   HelmRepo   https://raw.githubusercontent.com/dymaczew/charts/master/repo/incubator/   122m\n`}</code></pre>\n    <p>{`This also can be varified in the console. Click the hambuger icon -> Manage Applications. Then launch the `}<strong parentName=\"p\">{`Resources`}</strong>{` tab which shows the channel that is just created.`}</p>\n    <img {...{\n      \"src\": \"/assets/img/cp4mcm/mcm-channel.jpg\",\n      \"alt\": \"Channel Image\"\n    }}></img>\n    <h3>{`Create the Subscription`}</h3>\n    <p>{`You will use the file, bookinfo-app.yaml in `}<em parentName=\"p\"><a parentName=\"em\" {...{\n          \"href\": \"https://github.com/hybrid-ops/subscription-examples/blob/master/bookinfo-project/bookinfo-app.yaml\"\n        }}>{`https://github.com/hybrid-ops/subscription-examples/blob/master/bookinfo-project/bookinfo-app.yaml`}</a></em>{` to create the required subscription with a placement policy. If you examine the file, you will find  that the placement rule is set to `}<strong parentName=\"p\">{`environment: Demo`}</strong>{`. So, ensure that label is set on your target cluster where you want the application to deployed to.\nAlso, edit the file to modify the route according to your environment.`}</p>\n    <img {...{\n      \"src\": \"/assets/img/cp4mcm/mcm-modifyroute.jpg\",\n      \"alt\": \"Modify Route\"\n    }}></img>\n    <p>{`After the modification of the route, run the command to deploy the application`}</p>\n    <pre><code parentName=\"pre\" {...{}}>{`oc apply -f bookinfo-app.yaml\n`}</code></pre>\n    <p>{`The application should be deployed. You can check if the subscription is propogated`}</p>\n    <pre><code parentName=\"pre\" {...{}}>{`oc get appsub --all-namespaces\n`}</code></pre>\n    <p>{`The output will look similar to`}</p>\n    <pre><code parentName=\"pre\" {...{}}>{`bookinfo-project   bookinfo-subscription   Propagated   141m\n`}</code></pre>\n    <p>{`You also can check the console. Click the hambuger icon -> Manage Applications -> Overview\n`}<img parentName=\"p\" {...{\n        \"src\": \"/assets/img/cp4mcm/mcm-applications.jpg\",\n        \"alt\": \"Applications Overview\"\n      }}></img></p>\n    <p>{`Now, click the application bookinfo-app to view the various resources involved with the subscription.\n`}<img parentName=\"p\" {...{\n        \"src\": \"/assets/img/cp4mcm/mcm-appdetails.jpg\",\n        \"alt\": \"Application Details\"\n      }}></img></p>\n    <p>{`Hover over the placement rule to see the placement rule of the application\n`}<img parentName=\"p\" {...{\n        \"src\": \"/assets/img/cp4mcm/mcm-appdetails1.jpg\",\n        \"alt\": \"Placement Rule Visualization\"\n      }}></img></p>\n    <p>{`If you donâ€™t see the application propogated, you may have to check the placement rule and ensure the rule matches to at least one cluster in your environment.`}</p>\n\n    </MDXLayout>;\n}\n\n;\nMDXContent.isMDXComponent = true;"}}